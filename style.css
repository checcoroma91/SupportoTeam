/* ==========================================================================
   V5 â€“ Neoâ€‘Glass Aurora (cool palette + strong neon)
   Autore: Romano + Copilot
   ========================================================================== */

/* ---------- Design Tokens (Cool + Neon) ---------- */
:root {
  /* Base palette (cool) */
  --bg-0: #070b1a;
  --bg-1: #0b1325;
  --bg-2: #0e1a33;
  --panel: #0e1328;
  --panel-2: #0a1022;

  /* Text */
  --txt: #e8eefb;
  --muted: #96a2c4;

  /* Accents (cool) */
  --pri: #4cc9f0; /* cyan */
  --sec: #7b7dff; /* indigo */
  --tri: #9a7bff; /* violet */

  /* Danger / Success */
  --danger: #ff5470;
  --success: #22c55e;

  /* Glass + Neon controls */
  --glass-alpha: 0.22;            /* intensitÃ  trasparenza pannelli */
  --blur: 12px;                   /* blur dello sfondo */
  --border: #23304e;              /* colore bordo pannelli */
  --radius: 16px;
  --radius-md: 12px;
  --radius-sm: 10px;

  /* Neon (forte) */
  --neon-color: #63e6ff;          /* colore base alone */
  --neon-aux: #7c3aed;            /* alone secondario */
  --neon-strength: 0.80;          /* 0.3 soft | 0.55 medium | 0.80 strong */

  /* Layout spacing */
  --pad: clamp(12px, 2.2vw, 18px);
  --gap: clamp(10px, 2vw, 16px);
  --gap-lg: clamp(14px, 2.6vw, 22px);

  /* Typography */
  --fs-sm: clamp(12px, 2.1vw, 14px);
  --fs-md: clamp(14px, 2.4vw, 16px);
  --fs-lg: clamp(16px, 2.6vw, 20px);

  /* Elevations */
  --shadow-1: 0 6px 24px rgba(0, 0, 0, .35);
  --shadow-2: 0 12px 36px rgba(0, 0, 0, .45);
}

/* ---------- Reset / Base ---------- */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  background:
    radial-gradient(1200px 800px at 15% -10%, rgba(124, 58, 237, .25), transparent 60%),
    radial-gradient(1000px 700px at 85% 0%, rgba(99, 230, 255, .25), transparent 60%),
    linear-gradient(180deg, var(--bg-1), var(--bg-0));
  color: var(--txt);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  line-height: 1.45;
}

/* ---------- Helpers ---------- */
.hidden { display: none !important; }
.muted { color: var(--muted); }
.row { display: flex; gap: var(--gap); align-items: center; }
.row.wrap { flex-wrap: wrap; }
.gap { gap: var(--gap); }
.mt { margin-top: var(--gap); }
.end { justify-content: flex-end; }
.col-2 { grid-column: span 2; }

.table-wrap { overflow: auto; }

/* ---------- Neo Glass Core ---------- */
.glass {
  background: color-mix(in srgb, var(--panel), transparent calc((1 - var(--glass-alpha)) * 100%));
  border: 1px solid color-mix(in srgb, var(--border), transparent 30%);
  border-radius: var(--radius);
  box-shadow: var(--shadow-1);
  backdrop-filter: blur(var(--blur));
}

/* Neon glow (strong) */
.neon {
  box-shadow:
    0 0 calc(28px * var(--neon-strength)) color-mix(in srgb, var(--neon-color), transparent 35%),
    0 0 calc(60px * var(--neon-strength)) color-mix(in srgb, var(--neon-aux), transparent 45%);
}

/* Divider hairline */
.hr {
  height: 1px;
  background: linear-gradient(90deg, transparent, color-mix(in srgb, var(--border), transparent 30%), transparent);
}

/* ---------- Header + Toolbar + Tabs ---------- */
.app-header {
  position: sticky; top: 0; z-index: 10;
  padding: var(--pad);
  border-bottom: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  background:
    linear-gradient(180deg, rgba(8,13,27,.75), rgba(8,13,27,.55));
  backdrop-filter: blur(10px);
}

.brand {
  display: flex; align-items: center; gap: 10px;
  font-size: var(--fs-lg); font-weight: 700;
}
.brand .dot {
  width: 10px; height: 10px; border-radius: 999px;
  background: radial-gradient(circle at 40% 30%, var(--neon-color), var(--sec));
  box-shadow:
    0 0 12px color-mix(in srgb, var(--neon-color), transparent 15%),
    0 0 26px color-mix(in srgb, var(--neon-aux), transparent 15%);
}

.toolbar {
  margin-top: var(--gap);
  display: flex; gap: 8px; overflow: auto;
  padding-bottom: 6px;
}

.btn {
  background: color-mix(in srgb, var(--panel-2), transparent 30%);
  color: var(--txt);
  border: 1px solid color-mix(in srgb, var(--border), transparent 20%);
  border-radius: var(--radius-sm);
  padding: 8px 12px;
  font-size: var(--fs-sm);
  white-space: nowrap;
  cursor: pointer;
  transition: transform .06s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
}
.btn:hover {
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--neon-color), transparent 55%);
  box-shadow:
    0 0 0 1px color-mix(in srgb, var(--neon-color), transparent 70%) inset,
    0 0 18px color-mix(in srgb, var(--neon-aux), transparent 40%);
}
.btn.primary {
  background: linear-gradient(180deg, color-mix(in srgb, var(--sec), transparent 10%), color-mix(in srgb, var(--panel-2), transparent 10%));
  border-color: color-mix(in srgb, var(--sec), transparent 45%);
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--sec), transparent 55%) inset;
}
.btn.ghost {
  background: transparent;
  border-color: color-mix(in srgb, var(--border), transparent 30%);
}
.btn.danger {
  background: color-mix(in srgb, #300816, transparent 10%);
  border-color: color-mix(in srgb, #ff6584, transparent 60%);
  color: #ffd0d6;
}
.btn:active { transform: translateY(0); }

.nav {
  margin-top: var(--gap);
  display: flex; gap: 8px; overflow: auto;
}

.tab {
  background: color-mix(in srgb, var(--panel-2), transparent 25%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  font-size: var(--fs-sm);
  color: var(--txt);
  font-weight: 600;
  cursor: pointer;
}
.tab[aria-current="page"] {
  background: linear-gradient(180deg, color-mix(in srgb, var(--panel), transparent 10%), transparent);
  border-color: color-mix(in srgb, var(--neon-color), transparent 55%);
  box-shadow:
    0 0 0 1px color-mix(in srgb, var(--neon-color), transparent 70%) inset,
    0 0 22px color-mix(in srgb, var(--neon-aux), transparent 50%);
}

/* ---------- Main / Layout ---------- */
.app-main { padding: var(--pad); display: grid; gap: var(--gap-lg); }

.pane { display: none; }
.pane.active { display: block; }

.tiles {
  display: grid; gap: var(--gap);
  grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
}
.tile {
  display: grid; gap: 6px; cursor: pointer;
  padding: var(--pad);
  border-radius: var(--radius);
  background: color-mix(in srgb, var(--panel), transparent calc((1 - var(--glass-alpha)) * 100%));
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  box-shadow: var(--shadow-1);
  backdrop-filter: blur(var(--blur));
  transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
}
.tile:hover {
  transform: translateY(-2px);
  border-color: color-mix(in srgb, var(--neon-color), transparent 45%);
  box-shadow:
    0 0 0 1px color-mix(in srgb, var(--neon-color), transparent 60%) inset,
    0 0 22px color-mix(in srgb, var(--neon-aux), transparent 50%);
}
.tile .ico {
  width: 52px; height: 52px; border-radius: 14px;
  display: grid; place-items: center; font-size: 24px;
  background: color-mix(in srgb, var(--panel-2), transparent 20%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
}

/* ---------- Cards / Tables ---------- */
.card { composes: glass; }
.card {
  background: color-mix(in srgb, var(--panel), transparent calc((1 - var(--glass-alpha)) * 100%));
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  border-radius: var(--radius);
  box-shadow: var(--shadow-1);
  backdrop-filter: blur(var(--blur));
}

.card-head {
  padding: var(--pad);
  border-bottom: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  display: flex; justify-content: space-between; align-items: center; gap: 8px;
  background:
    linear-gradient(90deg,
      color-mix(in srgb, #ffffff, transparent 92%),
      color-mix(in srgb, #ffffff, transparent 96%));
  border-top-left-radius: var(--radius);
  border-top-right-radius: var(--radius);
}

.card-body { padding: var(--pad); }

.table {
  width: 100%; border-collapse: collapse;
  font-size: var(--fs-sm);
}
.table th, .table td {
  padding: 9px 10px;
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  vertical-align: top;
  background: color-mix(in srgb, var(--panel-2), transparent 35%);
}
.table th {
  position: sticky; top: 0; z-index: 1;
  background:
    linear-gradient(180deg, color-mix(in srgb, var(--panel-2), transparent 10%), transparent);
  text-align: left;
}

.table .arrow { opacity: .85; margin-left: 4px; }

.table-actions { display: inline-flex; gap: 8px; }
.table-actions .btn {
  padding: 6px 8px; border-radius: 8px;
  background: color-mix(in srgb, var(--panel-2), transparent 15%);
}
.table-actions .btn.danger {
  border-color: color-mix(in srgb, #ff889e, transparent 55%);
  background: color-mix(in srgb, #3a0f1d, transparent 10%);
  color: #ffd6df;
}

/* Summary bars */
.summary-bar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 12px;
  border-bottom: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  background: color-mix(in srgb, var(--panel-2), transparent 20%);
  position: sticky; top: 0; z-index: 1;
}
.summary-bar .count { color: var(--muted); font-size: 13px; }

/* Badges */
.badge {
  display: inline-block; padding: 2px 8px; border-radius: 999px;
  font-size: 12px; border: 1px solid color-mix(in srgb, var(--border), transparent 15%);
  background: color-mix(in srgb, var(--panel-2), transparent 20%);
  color: #cfe3ff;
}
.badge.state {
  background: color-mix(in srgb, var(--panel-2), transparent 15%);
  border-color: color-mix(in srgb, var(--border), transparent 20%);
}
.badge.max {
  background: #5b1c33; color: #ffd1dc; border-color: #7a2a49;
}

/* Colonne larghezza minima (OP/SVC) */
#opTable th:nth-child(8), #opTable td.col-created { white-space: nowrap; min-width: 120px; }
#opTable th:nth-child(9), #opTable td.col-due     { white-space: nowrap; min-width: 120px; }
#svcTable { table-layout: fixed; }
#svcTable td, 
#svcTable th {
    white-space: normal !important;
    word-wrap: break-word;
    overflow-wrap: break-word;
}
#svcTable th:last-child, #svcTable td:last-child { white-space: nowrap; width: 96px; }
#crqTable { table-layout: fixed; }
#crqTable td, 
#crqTable th {
    white-space: normal !important;
    word-wrap: break-word;
    overflow-wrap: break-word;
}
#crqTable th:last-child, #crqTable td:last-child { white-space: nowrap; width: 96px; }
/* ---------- Modals / Dialog ---------- */
dialog.modal {
  border: none; padding: 0;
  width: min(980px, 96vw);
  max-height: 92vh;
  background: color-mix(in srgb, var(--panel), transparent calc((1 - var(--glass-alpha)) * 100%));
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  border-radius: var(--radius);
  box-shadow:
    var(--shadow-2),
    0 0 0 1px color-mix(in srgb, var(--neon-color), transparent 65%) inset,
    0 0 calc(36px * var(--neon-strength)) color-mix(in srgb, var(--neon-color), transparent 35%),
    0 0 calc(82px * var(--neon-strength)) color-mix(in srgb, var(--neon-aux), transparent 40%);
  backdrop-filter: blur(var(--blur));
}
dialog::backdrop { background: rgba(5, 8, 18, .58); }

.modal-head {
  display: flex; justify-content: space-between; align-items: center; gap: 10px;
  padding: var(--pad);
  border-bottom: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  background:
    linear-gradient(90deg,
      color-mix(in srgb, #ffffff, transparent 92%),
      color-mix(in srgb, #ffffff, transparent 96%));
  border-top-left-radius: var(--radius);
  border-top-right-radius: var(--radius);
}

.modal-body { padding: var(--pad); overflow: auto; }

.form-grid {
  display: grid; gap: var(--gap);
  grid-template-columns: repeat(2, minmax(0, 1fr));
}
.form-grid label { display: grid; gap: 6px; font-size: var(--fs-sm); color: var(--muted); }
.form-grid input,
.form-grid select,
.form-grid textarea {
  width: 100%;
  background: color-mix(in srgb, var(--panel-2), transparent 20%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  color: var(--txt);
  padding: 8px 10px;
  border-radius: var(--radius-sm);
  outline: none;
}
.form-grid textarea { min-height: 110px; resize: vertical; }
.form-grid .checkbox { display: flex; align-items: center; gap: 8px; }
.iconSel { min-width: 120px; }

.menu-grid { display: grid; gap: 8px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }

/* ---------- Links Cards (inline) ---------- */
.links-container .section {
  margin-bottom: var(--gap-lg);
  border-radius: var(--radius);
  overflow: clip;
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
}
.links-container .section-header {
  padding: 10px 12px;
  display: flex; align-items: center; justify-content: space-between; gap: 8px;
  background:
    linear-gradient(90deg,
      color-mix(in srgb, var(--panel-2), transparent 10%),
      color-mix(in srgb, var(--panel-2), transparent 0%));
  border-bottom: 1px solid color-mix(in srgb, var(--border), transparent 25%);
}
.links-container .section-title { display: flex; align-items: center; gap: 10px; }
.links-container .grid {
  display: grid; gap: var(--gap);
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  padding: var(--pad);
}
.links-container .card {
  border-radius: var(--radius-md);
  padding: var(--pad);
  background: color-mix(in srgb, var(--panel), transparent 18%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  box-shadow: var(--shadow-1);
}
.links-container .card-head {
  display: flex; align-items: center; justify-content: space-between;
  gap: 8px; padding: 0; border: none; background: transparent;
}
.links-container h3 {
  margin: 0; font-size: var(--fs-md); font-weight: 700;
}
.links-container a {
  color: var(--pri); text-decoration: none;
}
.links-container a:hover { text-decoration: underline; }

/* Drag handle */
.drag-handle {
  cursor: grab; user-select: none;
  border-radius: 8px;
  padding: 2px 6px;
  background: color-mix(in srgb, var(--panel-2), transparent 15%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
}

/* Insert caret (drag&drop) */
.insert-caret {
  position: absolute; width: 2px;
  background: linear-gradient(180deg, var(--neon-color), var(--sec));
  filter: drop-shadow(0 0 10px var(--neon-color));
}

/* ---------- Noscript ---------- */
.noscript {
  margin: var(--pad);
  padding: var(--pad);
  border: 1px solid #5d2a2a;
  background: #2b1212;
  border-radius: var(--radius);
  color: #ffd0d0;
}

/* ---------- Responsive Tweaks ---------- */
@media (max-width: 880px) {
  .form-grid { grid-template-columns: 1fr; }
  .brand strong { font-size: 18px; }
  .tiles { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 560px) {
  .tiles { grid-template-columns: 1fr; }
  .toolbar, .nav { scrollbar-width: thin; }
}

/* PATCH: Forza testo chiaro in tutte le sezioni critiche */

/* Titoli dei modali */
.modal-head strong,
.modal-head,
.modal-head h3 {
    color: var(--txt) !important;
}

/* Label dei campi dentro i dialog */
.form-grid label {
    color: var(--txt) !important;
}

/* Header delle card */
.card-head strong,
.card-head,
.card-head h3 {
    color: var(--txt) !important;
}

/* Titoli delle sezioni dei link */
.section-header .section-title span {
    color: var(--txt) !important;
}

/* Summary bars delle tabelle */
.summary-bar,
.summary-bar .count {
    color: var(--txt) !important;
}

/* Bottoni ghost (chiudi modale) */
.btn.ghost {
    color: var(--txt) !important;
    border-color: color-mix(in srgb, var(--txt), transparent 40%) !important;
}

/* Th delle tabelle */
.table th {
    color: var(--txt) !important;
}

/* ============================================================
   COLORI PERSONALIZZATI ESTESI PER SEZIONI + CARDS + BADGE
   ============================================================ */

/* Variabile CSS per la sezione */
.links-container .section[data-color] {
    --sec-color: var(--section-color);
}

.section {
    /* permette di leggere lâ€™attributo data-color come variabile CSS */
    --section-color: initial;
}
.section[data-color] {
    --section-color: attr(data-color);
}

/* Bordo sezione */
.links-container .section[data-color] {
    border-left: 6px solid var(--sec-color);
}

/* Header della sezione */
.links-container .section[data-color] .section-header {
    background: color-mix(in srgb, var(--sec-color), transparent 85%);
    border-bottom: 1px solid color-mix(in srgb, var(--sec-color), transparent 40%);
}

/* Titolo sezione */
.links-container .section[data-color] .section-title span:last-child {
    color: var(--sec-color);
    font-weight: 700;
}

/* Icona sezione */
.links-container .section[data-color] .section-title span:first-child {
    filter: drop-shadow(0 0 6px var(--sec-color));
}

/* === Bottoni di sezione =============================== */
.links-container .section[data-color] .section-actions button {
    border: 1px solid color-mix(in srgb, var(--sec-color), transparent 30%);
    background: color-mix(in srgb, var(--sec-color), transparent 85%);
    color: var(--sec-color);
    font-weight: 600;
    transition: 0.2s ease;
}

.links-container .section[data-color] .section-actions button:hover {
    border-color: var(--sec-color);
    background: color-mix(in srgb, var(--sec-color), transparent 70%);
    box-shadow: 0 0 15px color-mix(in srgb, var(--sec-color), transparent 60%);
}

/* === Card ============================================ */
.links-container .section[data-color] .card {
    border: 1px solid color-mix(in srgb, var(--sec-color), transparent 45%);
    background: color-mix(in srgb, var(--sec-color), transparent 92%);
    box-shadow: 0 0 12px color-mix(in srgb, var(--sec-color), transparent 85%);
    transition: 0.25s ease;
}

.links-container .section[data-color] .card:hover {
    border-color: var(--sec-color);
    box-shadow: 0 0 25px color-mix(in srgb, var(--sec-color), transparent 60%);
}

/* Icona nelle card */
.links-container .section[data-color] .card .card-head h3::before {
    content: "ðŸ”—";
    margin-right: 6px;
    color: var(--sec-color);
    filter: drop-shadow(0 0 6px var(--sec-color));
}

/* === Bottoni dentro le card =========================== */
.links-container .section[data-color] .card .table-actions button {
    border: 1px solid color-mix(in srgb, var(--sec-color), transparent 40%);
    background: color-mix(in srgb, var(--sec-color), transparent 88%);
    color: var(--sec-color);
}

.links-container .section[data-color] .card .table-actions button:hover {
    border-color: var(--sec-color);
    background: color-mix(in srgb, var(--sec-color), transparent 70%);
    box-shadow: 0 0 10px color-mix(in srgb, var(--sec-color), transparent 60%);
}

/* === Badge =========================================== */
.links-container .section[data-color] .card .badge {
    border-color: color-mix(in srgb, var(--sec-color), transparent 40%);
    background: color-mix(in srgb, var(--sec-color), transparent 80%);
    color: var(--sec-color);
    font-weight: 600;
}

/* === Caret del drag & drop ============================ */
.insert-caret {
    background: linear-gradient(
        180deg,
        var(--sec-color),
        color-mix(in srgb, var(--sec-color), transparent 40%)
    ) !important;
    box-shadow: 0 0 12px var(--sec-color);
    width: 2px;
}

/* ====== LISTA SEZIONI (GESTISCI SEZIONI) ====== */

.sections-list {
    display: grid;
    gap: 14px;
    margin-bottom: 16px;
}

.sections-list .list-item {
    display: grid;
    grid-template-columns: 1fr 1fr 120px 100px 90px;
    gap: 8px;
    padding: 12px;
    background: color-mix(in srgb, var(--panel), transparent 20%);
    border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
    border-radius: var(--radius-md);
    align-items: center;
}

.sections-list input[type="text"],
.sections-list input[type="color"],
.sections-list select {
    width: 100%;
    padding: 6px 8px;
    background: color-mix(in srgb, var(--panel-2), transparent 20%);
    border: 1px solid color-mix(in srgb, var(--border), transparent 25%);
    color: var(--txt);
    border-radius: var(--radius-sm);
}

.sections-list .controls {
    display: flex;
    gap: 6px;
}

.sections-list .controls button {
    padding: 6px;
    border-radius: 8px;
    border: 1px solid color-mix(in srgb, var(--border), transparent 30%);
    background: color-mix(in srgb, var(--panel-2), transparent 20%);
    cursor: pointer;
}

.sections-list .controls button:hover {
    border-color: var(--neon-color);
    box-shadow: 0 0 12px var(--neon-color);
}

.sections-list {
    display: grid;
    gap: 12px;
    margin-bottom: 20px;
}

.sections-list .list-item {
    display: grid;
    grid-template-columns: 1fr 1fr 120px 80px 120px;
    gap: 10px;
    padding: 12px;
    background: color-mix(in srgb, var(--panel), transparent 20%);
    border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
    border-radius: var(--radius-md);
}

.sections-list input[type="text"],
.sections-list input[type="color"],
.sections-list select {
    background: color-mix(in srgb, var(--panel-2), transparent 20%);
    border: 1px solid color-mix(in srgb, var(--border), transparent 30%);
    color: var(--txt);
    padding: 6px 8px;
    border-radius: var(--radius-sm);
}

.sections-list .controls {
    display: flex;
    gap: 6px;
}

/* ============================================================
   Stile scuro Neoâ€‘Glass per i campi "Nuova sezione"
   ============================================================ */

.new-section-row input[type="text"],
.new-section-row input[type="color"],
.new-section-row select {
    background: color-mix(in srgb, var(--panel-2), transparent 20%);
    border: 1px solid color-mix(in srgb, var(--border), transparent 30%);
    color: var(--txt);
    padding: 8px 10px;
    border-radius: var(--radius-sm);
    height: 38px;
}

.new-section-row input[type="color"] {
    padding: 2px;
    cursor: pointer;
}

.new-section-row select {
    cursor: pointer;
}

.new-section-row button.btn.primary {
    height: 38px;
    display: flex;
    align-items: center;
    border-radius: var(--radius-sm);
}

/* Optional (ma top): effetto hover coerente */
.new-section-row input:hover,
.new-section-row select:hover {
    border-color: color-mix(in srgb, var(--neon-color), transparent 50%);
}

/* Stile scuro identico agli input delle sezioni */
#sectionsDlg .new-section-row input[type="text"],
#sectionsDlg .new-section-row select,
#sectionsDlg .new-section-row input[type="color"] {
    background: color-mix(in srgb, var(--panel-2), transparent 20%) !important;
    border: 1px solid color-mix(in srgb, var(--border), transparent 30%) !important;
    color: var(--txt) !important;
    padding: 8px 10px !important;
    border-radius: var(--radius-sm) !important;
    height: 38px !important;
}

/* ============================================================
   COLORI PERSONALIZZATI DELLE SEZIONI (VERSIONE DEFINITIVA)
   ============================================================ */

/* JS imposta --sec-color, perciÃ² basta questo */
.section[data-color] {
    /* lasciato vuoto volontariamente */
}


/* 2) Bordo sezione */
.section[data-color] {
    border-left: 6px solid var(--sec-color);
}

/* 3) Header */
.section[data-color] .section-header {
    background: color-mix(in srgb, var(--sec-color), transparent 85%);
    border-bottom: 1px solid color-mix(in srgb, var(--sec-color), transparent 40%);
}

/* 4) Titolo */
.section[data-color] .section-title span:last-child {
    color: var(--sec-color);
    font-weight: 700;
}

/* 5) Icona sezione */
.section[data-color] .section-title span:first-child {
    filter: drop-shadow(0 0 6px var(--sec-color));
}

/* 6) Bottoni della sezione */
.section[data-color] .section-actions button {
    border: 1px solid color-mix(in srgb, var(--sec-color), transparent 30%);
    background: color-mix(in srgb, var(--sec-color), transparent 85%);
    color: var(--sec-color);
}
.section[data-color] .section-actions button:hover {
    border-color: var(--sec-color);
    background: color-mix(in srgb, var(--sec-color), transparent 70%);
    box-shadow: 0 0 15px color-mix(in srgb, var(--sec-color), transparent 60%);
}

/* 7) CARD */
.section[data-color] .card {
    border: 1px solid color-mix(in srgb, var(--sec-color), transparent 45%);
    background: color-mix(in srgb, var(--sec-color), transparent 92%);
    box-shadow: 0 0 12px color-mix(in srgb, var(--sec-color), transparent 85%);
}
.section[data-color] .card:hover {
    border-color: var(--sec-color);
    box-shadow: 0 0 22px color-mix(in srgb, var(--sec-color), transparent 70%);
}

/* 8) Badge interni */
.section[data-color] .badge {
    border-color: color-mix(in srgb, var(--sec-color), transparent 40%);
    background: color-mix(in srgb, var(--sec-color), transparent 80%);
    color: var(--sec-color);
}

/* 9) Caret drag & drop */
.insert-caret {
    background: linear-gradient(
        180deg,
        var(--sec-color),
        color-mix(in srgb, var(--sec-color), transparent 40%)
    );
    box-shadow: 0 0 12px var(--sec-color);
    width: 2px;
}

/* ============================================================
   FILTRA SEZIONI â€“ Stile Neoâ€‘Glass
   ============================================================ */

#filterSectionsDlg .modal-body {
    padding: 20px;
}

/* Griglia delle voci */
#filterMenu {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 16px;
}

/* Bottone sezione */
#filterMenu .menu-btn {
    background: color-mix(in srgb, var(--panel-2), transparent 15%);
    border: 1px solid color-mix(in srgb, var(--border), transparent 40%);
    backdrop-filter: blur(18px);
    padding: 14px 18px;
    border-radius: var(--radius-lg);
    text-align: left;
    color: var(--txt);
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    transition: 0.25s ease;
}

/* Hover neon */
#filterMenu .menu-btn:hover {
    border-color: var(--neon-color);
    box-shadow: 0 0 18px color-mix(in srgb, var(--neon-color), transparent 60%);
    transform: translateY(-1px);
}

/* Layout interno */
#filterMenu .menu-btn .label {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 12px;
}

/* Icona */
#filterMenu .menu-btn .ico {
    font-size: 22px;
    filter: drop-shadow(0 0 4px color-mix(in srgb, var(--neon-color), transparent 65%));
}

/* Testi */
#filterMenu .menu-btn .text {
    display: flex;
    flex-direction: column;
}

#filterMenu .menu-btn .text .name {
    font-weight: 600;
    margin-bottom: 2px;
}

#filterMenu .menu-btn .text .desc {
    font-size: 13px;
    color: color-mix(in srgb, var(--txt), transparent 35%);
}

/* Pulsante "Mostra tutte le sezioni" */
#filterMenu .menu-btn:first-child {
    grid-column: 1 / -1; /* occupa tutta la riga */
    text-align: center;
    justify-content: center;
}

/* ===================================================================
   FILTRO OPEN POINTS â€“ NeoGlass UI
   =================================================================== */

/* --- General text & placeholder fix --- */
#opFilterDlg,
#opFilterDlg * {
    color: var(--txt) !important;
}

#opFilterDlg input::placeholder {
    color: color-mix(in srgb, var(--txt), transparent 45%) !important;
}

/* --- Layout grid --- */
.opf-grid {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.opf-grid .col-full {
    width: 100%;
}

.row2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
}

/* --- Checkbox groups affiancati --- */
.opf-groups {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}

/* --- Fieldset neo-glass --- */
#opFilterDlg fieldset {
    background: color-mix(in srgb, var(--panel-2), transparent 22%);
    border: 1px solid color-mix(in srgb, var(--border), transparent 40%);
    border-radius: var(--radius-md);
    padding: 16px 18px;
    backdrop-filter: blur(10px);
}

#opFilterDlg legend {
    padding: 0 8px;
    font-weight: 600;
    color: var(--txt);
}

/* Checkbox list */
#opFilterDlg .checks {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* --- Checkbox neon accent --- */
#opFilterDlg input[type="checkbox"] {
    accent-color: var(--neon-color);
}

/* --- Inputs styling uniform --- */
#opFilterDlg input[type="text"],
#opFilterDlg input[type="date"],
#opFilterDlg input:not([type]),
#opFilterDlg textarea {
    background: color-mix(in srgb, var(--panel-2), transparent 15%);
    border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
    padding: 8px 10px;
    border-radius: var(--radius-sm);
    width: 100%;
}

/* Hover input */
#opFilterDlg input:hover {
    border-color: color-mix(in srgb, var(--neon-color), transparent 40%);
}

/* --- Action buttons alignment --- */
#opFilterDlg .actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

/* ===== OP: Filtra Open Points â€” testi chiari, layout compatto, checkbox orizzontali ===== */

/* Testi chiari (nel dubbio, forziamo anche i placeholder) */
#opFilterDlg, 
#opFilterDlg label,
#opFilterDlg legend,
#opFilterDlg input,
#opFilterDlg select {
  color: var(--txt) !important;
}
#opFilterDlg input::placeholder {
  color: color-mix(in srgb, var(--txt), transparent 40%) !important;
}

/* Grid piÃ¹ compatta (2 o 3 colonne a seconda dello spazio) */
#opFilterDlg .opf-grid,
#opFilterDlg .modal-body {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* passa a 3 colonne */
  column-gap: 20px;
  row-gap: 12px;
}

/* I controlli riempiono la colonna */
#opFilterDlg label > input,
#opFilterDlg label > select,
#opFilterDlg .row2 label > input {
  width: 100%;
}

/* Fieldset compatti */
#opFilterDlg fieldset {
  border: 1px solid color-mix(in srgb, var(--border), transparent 40%);
  padding: 8px 12px;
  border-radius: 8px;
}
#opFilterDlg fieldset legend {
  font-size: 13px;
  margin-bottom: 4px;
}

/* âœ… Checkbox in orizzontale per PrioritÃ  e Stato */
#opFilterDlg .checks {                 /* vale per #opfPrioGroup e #opfStatusGroup */
  display: flex !important;
  flex-wrap: wrap;
  gap: 10px 18px;
  align-items: center;
}
#opFilterDlg .checks label {
  display: flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
}
/* (opzionale) checkbox un filo piÃ¹ grandi */
#opFilterDlg .checks input[type="checkbox"] {
  transform: scale(1.1);
}

/* Riga bottoni finale allineata a destra */
#opFilterDlg .actions.end {
  grid-column: 1 / -1;
}

/* CRQ â€” forza testo chiaro in TUTTI i campi */
#crqEditorDlg input,
#crqEditorDlg select,
#crqEditorDlg textarea,
#crqEditorDlg label {
  color: var(--txt) !important;
}

/* Placeholder chiari */
#crqEditorDlg input::placeholder,
#crqEditorDlg textarea::placeholder {
  color: color-mix(in srgb, var(--txt), transparent 40%) !important;
}

/* Input scuri coerenti con gli altri modali */
#crqEditorDlg input,
#crqEditorDlg select,
#crqEditorDlg textarea {
  background: color-mix(in srgb, var(--panel-2), transparent 20%) !important;
  border: 1px solid color-mix(in srgb, var(--border), transparent 30%) !important;
}

#crqEditorDlg .form-grid {
  grid-template-columns: repeat(3, 1fr);
}

#crqEditorDlg #crqPrj {
    min-height: 110px !important;
    resize: vertical;
}

/* CRQ: ingrandisce il campo Stato */
#crqEditorDlg .row label:first-child select {
    min-width: 220px !important;
}

/* CRQ â€“ grid a 3 colonne */
#crqEditorDlg .form-grid {
  grid-template-columns: repeat(3, 1fr);
  column-gap: 20px;
}

/* PRJ e Contenuto full-width */
#crqEditorDlg #crqPrj,
#crqEditorDlg #crqContenuto {
  grid-column: 1 / -1;
}

#crqEditorDlg #crqStato {
  min-width: 240px;
}
/* ===== CRQ: layout pulito in 3 colonne ===== */
#crqEditorDlg .form-grid {
  /* passa da 2 a 3 colonne */
  grid-template-columns: 1fr 1fr 1fr;
  column-gap: 20px;
  row-gap: 10px;
}

/* le .row "appiattiscono" i campi: facciamole distribuire bene */
#crqEditorDlg .row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr; /* ogni riga 3 colonne */
  gap: 20px;
}

/* label sempre su una riga (niente spezzamenti brutti) */
#crqEditorDlg .row label,
#crqEditorDlg .form-grid > label {
  white-space: nowrap;
}

/* ma il controllo (input/select/textarea) dentro la label deve allargarsi */
#crqEditorDlg label > input,
#crqEditorDlg label > select,
#crqEditorDlg label > textarea {
  width: 100%;
}

/* Stato: larghezza minima per leggere tutta la voce */
#crqEditorDlg #crqStato {
  min-width: 260px;
}

/* Bhelp: rendiamolo leggibile e allineato alla colonna, non microscopico */
#crqEditorDlg #crqBhelp {
  min-width: 260px;
}

/* PRJ e Contenuto come blocchi full-width sotto (una riga intera) */
#crqEditorDlg #crqPrj,
#crqEditorDlg #crqContenuto {
  grid-column: 1 / -1;
}

/* PRJ piÃ¹ alto, coerente con lo stile */
#crqEditorDlg #crqPrj {
  min-height: 120px;
  resize: vertical;
}

/* ===== CRQ â€” container piÃ¹ largo ===== */
#crqEditorDlg.modal {
    width: 1100px;         /* aumento contenitore */
    max-width: 95vw;       /* sicurezza su schermi piccoli */
}

#crqEditorDlg .form-grid {
    grid-template-columns: repeat(3, 1fr);
    column-gap: 24px;
    row-gap: 14px;
}

#crqEditorDlg label {
    white-space: nowrap;
}

#crqEditorDlg input,
#crqEditorDlg select,
#crqEditorDlg textarea {
    width: 100%;
}

/* ===== FILTRA CRQ: testi chiari ===== */
#crqFilterDlg,
#crqFilterDlg label,
#crqFilterDlg legend,
#crqFilterDlg input,
#crqFilterDlg select {
    color: var(--txt) !important;
}

/* placeholder chiari */
#crqFilterDlg input::placeholder {
    color: color-mix(in srgb, var(--txt), transparent 40%) !important;
}

/* ===== FILTRA CRQ: layout a 3 colonne ===== */
#crqFilterDlg .form-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    column-gap: 20px;
    row-gap: 16px;
}

#crqFilterDlg label > input,
#crqFilterDlg label > select {
    width: 100%;
}

/* Campi che devono prendere tutta la larghezza */
#crqFilterDlg #crqfText,
#crqFilterDlg #crqfContenuto {
    grid-column: 1 / -1;
}

#crqFilterDlg fieldset {
    border: 1px solid color-mix(in srgb, var(--border), transparent 40%);
    padding: 8px 12px;
    border-radius: 8px;
}

#crqFilterDlg fieldset legend {
    font-size: 13px;
    margin-bottom: 4px;
}

#crqFilterDlg .checks {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 6px;
}

/* ===== FILTRA CRQ â€” Checkbox in orizzontale ===== */

/* Layout orizzontale per i gruppi checkbox */
#crqFilterDlg .checks {
    display: flex !important;
    flex-wrap: wrap;
    gap: 10px 20px;       /* distanza orizzontale / verticale */
    align-items: center;
}

/* Le singole label in linea */
#crqFilterDlg .checks label {
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
}

/* Input checkbox piÃ¹ leggibile */
#crqFilterDlg .checks input[type="checkbox"] {
    transform: scale(1.2);   /* opzionale ma piÃ¹ visibile */
}

/* Fieldset compatti */
#crqFilterDlg fieldset {
    padding: 6px 10px;
}

/* ===== SVC: Filtra Servizi â€” testi chiari, layout compatto, checkbox orizzontali ===== */

/* Testi chiari */
#svcFilterDlg,
#svcFilterDlg label,
#svcFilterDlg legend,
#svcFilterDlg input,
#svcFilterDlg select {
  color: var(--txt) !important;
}
#svcFilterDlg input::placeholder {
  color: color-mix(in srgb, var(--txt), transparent 40%) !important;
}

/* Grid piÃ¹ compatta (3 colonne) */
#svcFilterDlg .form-grid,
#svcFilterDlg .modal-body.form-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  column-gap: 20px;
  row-gap: 12px;
}

/* I controlli riempiono la colonna */
#svcFilterDlg label > input,
#svcFilterDlg label > select {
  width: 100%;
}

/* Fieldset compatti */
#svcFilterDlg fieldset {
  border: 1px solid color-mix(in srgb, var(--border), transparent 40%);
  padding: 8px 12px;
  border-radius: 8px;
}
#svcFilterDlg fieldset legend {
  font-size: 13px;
  margin-bottom: 4px;
}

/* âœ… Checkbox in orizzontale per Tipo e Stato */
#svcFilterDlg #svcfTipoGroup.checks,
#svcFilterDlg #svcfStatoGroup.checks {
  display: flex !important;
  flex-wrap: wrap;
  gap: 10px 18px;
  align-items: center;
}
#svcFilterDlg .checks label {
  display: flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
}
#svcFilterDlg .checks input[type="checkbox"] {
  transform: scale(1.1);
}

/* Riga bottoni finale allineata a destra */
#svcFilterDlg .actions.end {
  grid-column: 1 / -1;
}

#opFilterDlg label, #svcFilterDlg label { white-space: nowrap; }

/* ============================================================
   CHIP STYLE â€“ APPLICATO A TUTTI I FILTRI (CRQ, OP, SVC)
   ============================================================ */

/* Nascondiamo il checkbox ma lasciamo cliccabile la label */
.checks input[type="checkbox"] {
    display: none !important;
}

/* La label diventa un chip */
.checks label {
    display: inline-flex;
    align-items: center;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;

    /* stile neutro */
    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.15);

    /* transizioni morbide */
    transition:
        background 0.18s ease,
        border-color 0.18s ease,
        transform 0.12s cubic-bezier(0.2, 0.6, 0.3, 1),
        box-shadow 0.2s ease;
}

/* Effetto pressione (animazione click) */
.checks label:active {
    transform: scale(0.94);
}

/* Quando il checkbox Ã¨ checked â†’ chip attivo */
.checks input[type="checkbox"]:checked + label {
    background: rgba(99, 230, 255, 0.18);
    border-color: rgb(99, 230, 255);
    box-shadow: 0 0 6px rgba(99, 230, 255, 0.5);
    transform: scale(1.03);
}

/* Hover per maggiore risposta */
.checks label:hover {
    border-color: rgba(99, 230, 255, 0.6);
}

/* Layout orizzontale con wrap */
.checks {
    display: flex !important;
    flex-wrap: wrap;
    gap: 10px 14px;
}

/* Fieldset compatti */
#crqFilterDlg fieldset,
#opFilterDlg fieldset,
#svcFilterDlg fieldset {
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 10px;
    padding: 10px 14px;
}

#crqFilterDlg legend,
#opFilterDlg legend,
#svcFilterDlg legend {
    font-size: 13px;
    margin-bottom: 6px;
    color: var(--txt);
}

/* ============================================================
   CHIP STYLE UNIVERSALE (CRQ â€¢ OP â€¢ SVC)
   Funziona con il tuo HTML attuale (senza modifiche)
   ============================================================ */

/* Nascondo solo la checkbox, ma lasciamo la label cliccabile */
.checks input[type="checkbox"] {
    position: absolute;
    opacity: 0;
    pointer-events: none;
}

/* La label diventa il chip */
.checks label {
    display: inline-flex;
    align-items: center;
    justify-content: center;

    padding: 6px 14px;
    border-radius: 20px;
    font-size: 13px;
    cursor: pointer;

    background: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.18);

    transition:
        background 0.18s ease,
        border-color 0.18s ease,
        transform 0.12s cubic-bezier(0.2, 0.6, 0.3, 1),
        box-shadow 0.2s ease;
}

/* Animazione â€œpressioneâ€ al click */
.checks label:active {
    transform: scale(0.92);
}

/* CHIP ATTIVO: grazie a :has() funziona senza cambiare HTML */
.checks label:has(input:checked) {
    transform: scale(1.05);
    background: rgba(99, 230, 255, 0.18);
    border-color: rgb(99, 230, 255);
    box-shadow: 0 0 6px rgba(99, 230, 255, 0.5);
}

/* Hover reattivo */
.checks label:hover {
    border-color: rgba(99, 230, 255, 0.5);
}

/* Layout orizzontale */
.checks {
    display: flex !important;
    flex-wrap: wrap;
    gap: 10px 14px;
}


/* ============================================================
   COLORI CHIP PER STATI CRQ
   (attivi solo quando selezionati)
   ============================================================ */

.checks label:has(input[value="Bozza"]:checked) {
    background: rgba(150,150,150,0.25);
    border-color: #c7c7c7;
}

.checks label:has(input[value="Richiesta autorizzazione"]:checked) {
    background: rgba(64,175,255,0.20);
    border-color: #40afff;
}

.checks label:has(input[value="Pianificazione in corso"]:checked) {
    background: rgba(60,120,255,0.20);
    border-color: #3c78ff;
}

.checks label:has(input[value="Revisione pianificata"]:checked) {
    background: rgba(144,70,255,0.25);
    border-color: #b36aff;
}

.checks label:has(input[value="Approvazione pianificata"]:checked) {
    background: rgba(255,210,80,0.25);
    border-color: #ffd250;
}

.checks label:has(input[value="Pianificato"]:checked) {
    background: rgba(90,255,255,0.20);
    border-color: #5bffff;
}

.checks label:has(input[value="Implementazione in corso"]:checked) {
    background: rgba(255,140,60,0.23);
    border-color: #ff8c3c;
}

.checks label:has(input[value="Completato"]:checked) {
    background: rgba(80,255,120,0.22);
    border-color: #4aff73;
}

.checks label:has(input[value="Chiuso"]:checked) {
    background: rgba(255,80,100,0.22);
    border-color: #ff5064;
}


/* ============================================================
   COLORI CHIP PER PRIORITÃ€ OP
   ============================================================ */

.checks label:has(input[value="low"]:checked) {
    background: rgba(80,255,120,0.20);
    border-color: #4aff72;
}

.checks label:has(input[value="medium"]:checked) {
    background: rgba(255,220,100,0.22);
    border-color: #ffd652;
}

.checks label:has(input[value="high"]:checked) {
    background: rgba(255,140,60,0.22);
    border-color: #ff8c3c;
}

.checks label:has(input[value="critical"]:checked) {
    background: rgba(255,60,60,0.22);
    border-color: #ff3c3c;
}


/* ============================================================
   COLORI CHIP PER SERVIZI (TIPO / STATO)
   ============================================================ */

.checks label:has(input[value="REST"]:checked) {
    background: rgba(80,120,255,0.22);
    border-color: #6080ff;
}

.checks label:has(input[value="SOAP"]:checked) {
    background: rgba(150,70,255,0.22);
    border-color: #a040ff;
}

.checks label:has(input[value="OK"]:checked),
.checks label:has(input[value="ATTIVO"]:checked) {
    background: rgba(100,255,160,0.22);
    border-color: #62ff9e;
}

.checks label:has(input[value="KO"]:checked),
.checks label:has(input[value="ERRORE"]:checked) {
    background: rgba(255,80,80,0.22);
    border-color: #ff5050;
}

/* Alternativa/integrazione: stile attivo anche con + label */
.checks input[type="checkbox"]:checked + label {
  /* gli stessi stili del chip attivo */
}

/* Esempio: Chiuso rosso, Completato verde, ecc. */
.checks label[for="crqf_stato_chiuso"]:has(input:checked),
#crqfStatiGroup input#crqf_stato_chiuso:checked + label {
  background: rgba(255,80,100,0.22);
  border-color: #ff5064;
}

/* Chip attivo quando l'input Ã¨ checkato e precede il label */
.checks input[type="checkbox"]:checked + label {
  background: rgba(99, 230, 255, 0.18);
  border-color: rgb(99, 230, 255);
  box-shadow: 0 0 6px rgba(99, 230, 255, 0.5);
  transform: scale(1.05);
}

/* Hover coerente anche in questa struttura */
.checks input[type="checkbox"] + label:hover {
  border-color: rgba(99, 230, 255, 0.5);
}

/* ============================================================
   RIPPLE EFFECT (Material-style) per i CHIP
   Funziona su TUTTE le label dentro .checks
   ============================================================ */

.checks label {
    position: relative;
    overflow: hidden; /* serve per contenere il ripple */
}

.checks label::after {
    content: "";
    position: absolute;
    width: 8px;
    height: 8px;
    background: rgba(99, 230, 255, 0.55); /* colore dell'onda */
    border-radius: 50%;
    opacity: 0;
    transform: scale(1);
    transition: opacity 0.45s ease, transform 0.45s ease;
    pointer-events: none;
}

.checks label:active::after {
    opacity: 0.9;
    transform: scale(14); /* grandezza esplosione */
    left: var(--r-x, 50%);
    top: var(--r-y, 50%);
}

/* ===== CRQ Filter â€” Stato: span su 3 colonne della form ===== */
/* il fieldset "Stato" occupa l'intera riga della grid del dialog */
#crqFilterDlg #crqfStatiGroup,
#crqFilterDlg #crqfStatiGroup ~ .actions.end, /* se vuoi che i bottoni restino sotto */
#crqFilterDlg fieldset:has(#crqfStatiGroup) {
  grid-column: 1 / -1;
}

/* ===== CRQ Filter â€” Stato: layout interno in 3 colonne ===== */
/* Contenitore a griglia per distribuire i chip su 3 colonne */
#crqFilterDlg #crqfStatiGroup {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px 14px; /* verticale | orizzontale */
  align-items: start;
}

/* Manteniamo la resa "chip" sulle label (giÃ  definita) e facciamo sÃ¬ che si allarghino bene */
#crqFilterDlg #crqfStatiGroup input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}
#crqFilterDlg #crqfStatiGroup label {
  display: inline-flex;
  width: 100%;                  /* il chip riempie la colonna */
  justify-content: center;      /* testo centrato dentro il chip */
  white-space: nowrap;
}

/* Stato selezionato (funziona sia con :has sia con input:checked + label) */
#crqFilterDlg #crqfStatiGroup label:has(input:checked),
#crqFilterDlg #crqfStatiGroup input[type="checkbox"]:checked + label {
  transform: scale(1.05);
  background: rgba(99, 230, 255, 0.18);
  border-color: rgb(99, 230, 255);
  box-shadow: 0 0 6px rgba(99, 230, 255, 0.5);
}
#crqFilterDlg #crqfStatiGroup input[type="checkbox"] + label:hover {
  border-color: rgba(99, 230, 255, 0.5);
}

/* Ripple giÃ  supportato: assicuriamoci che le label contengano l'onda */
#crqFilterDlg #crqfStatiGroup label {
  position: relative;
  overflow: hidden;
}

/* â€” opzionale â€”: se vuoi ancora piÃ¹ compatto su schermi larghi */
@media (min-width: 1400px) {
  #crqFilterDlg #crqfStatiGroup {
    gap: 8px 12px;
  }
}

/* ============================================================
   CRQ Filter â€” EMERGENZA: span su 3 colonne + 3 colonne interne
   ============================================================ */

/* Span su tutte le colonne della form */
#crqFilterDlg fieldset:has(#crqfEmergGroup) {
  grid-column: 1 / -1;
}

/* Tre colonne interne per i chip */
#crqFilterDlg #crqfEmergGroup {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px 14px;
}

/* Chip pieni di larghezza colonna */
#crqFilterDlg #crqfEmergGroup label {
  display: inline-flex;
  width: 100%;
  justify-content: center;
  position: relative;
  overflow: hidden; /* necessario per ripple */
  white-space: nowrap;
}

/* Attivazione chip */
#crqFilterDlg #crqfEmergGroup label:has(input:checked),
#crqFilterDlg #crqfEmergGroup input:checked + label {
  transform: scale(1.05);
  background: rgba(99, 230, 255, 0.18);
  border-color: rgb(99, 230, 255);
  box-shadow: 0 0 6px rgba(99, 230, 255, 0.5);
}


/* ============================================================
   CRQ Filter â€” UTILIZZATO: span su 3 colonne + 3 colonne interne
   ============================================================ */

#crqFilterDlg fieldset:has(#crqfUtilGroup) {
  grid-column: 1 / -1;
}

#crqFilterDlg #crqfUtilGroup {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px 14px;
}

#crqFilterDlg #crqfUtilGroup label {
  display: inline-flex;
  width: 100%;
  justify-content: center;
  position: relative;
  overflow: hidden;
  white-space: nowrap;
}

#crqFilterDlg #crqfUtilGroup label:has(input:checked),
#crqFilterDlg #crqfUtilGroup input:checked + label {
  transform: scale(1.05);
  background: rgba(99, 230, 255, 0.18);
  border-color: rgb(99, 230, 255);
  box-shadow: 0 0 6px rgba(99, 230, 255, 0.5);
}

/* (il ripple funziona automaticamente perchÃ© le label hanno overflow:hidden) */

/* ============================================================
   UNIFORMITÃ€ FILTRI (CRQ â€¢ OP â€¢ SVC)
   Applica a OP e SVC lo stesso layout del filtro CRQ
   ============================================================ */

/* ðŸ”µ 1) Griglia a 3 colonne come CRQ */
#svcFilterDlg .form-grid,
#opFilterDlg .form-grid {
  display: grid !important;
  grid-template-columns: repeat(3, 1fr) !important;
  column-gap: 20px !important;
  row-gap: 14px !important;
}

/* ðŸ”µ 2) Label sempre in una riga */
#svcFilterDlg label,
#opFilterDlg label {
  white-space: nowrap !important;
}

/* ðŸ”µ 3) Input/select al 100% */
#svcFilterDlg label > input,
#svcFilterDlg label > select,
#opFilterDlg label > input,
#opFilterDlg label > select {
  width: 100% !important;
}

/* ðŸ”µ 4) Fieldset compatti come CRQ */
#svcFilterDlg fieldset,
#opFilterDlg fieldset {
  border: 1px solid rgba(255,255,255,0.12) !important;
  border-radius: 10px !important;
  padding: 10px 14px !important;
}

/* ðŸ”µ 5) Chip identici a CRQ (full-width se in gruppi di molte voci) */
#svcFilterDlg .checks label,
#opFilterDlg .checks label {
  display: inline-flex !important;
  justify-content: center !important;
  width: 100% !important;
}

/* ðŸ”µ 6) Ripple identico (contenitore overflow hidden) */
#svcFilterDlg .checks label,
#opFilterDlg .checks label {
  position: relative !important;
  overflow: hidden !important;
}

/* ðŸ”µ 7) Gruppi checkbox â†’ griglia 3 colonne (come CRQ stati/emerg/util) */
#svcFilterDlg .checks,
#opFilterDlg .checks {
  display: grid !important;
  grid-template-columns: repeat(3, 1fr) !important;
  gap: 10px 14px !important;
}

/* ðŸ”µ 8) I gruppi piÃ¹ grandi (stato/ambito/etc) prendono tutta la riga */
#svcFilterDlg fieldset:has(.checks),
#opFilterDlg fieldset:has(.checks) {
  grid-column: 1 / -1 !important;
}

/* ============================================================
   OP FILTER â€” layout compatto a 3 colonne senza sovrapposizioni
   ============================================================ */

/* 1) La griglia del dialog: 3 colonne stabili e compatte */
#opFilterDlg .modal-body,
#opFilterDlg .opf-grid {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  column-gap: 16px !important;      /* un filo piÃ¹ stretto per compattezza */
  row-gap: 12px !important;
  align-items: start;                /* evita allineamenti â€œcentratiâ€ che creano buchi */
}

/* 2) Tutti i controlli riempiono la loro colonna e non sbordano */
#opFilterDlg label > input,
#opFilterDlg label > select,
#opFilterDlg .row2 label > input {
  width: 100% !important;
  min-width: 0 !important;          /* fondamentale per evitare overflow in grid */
}

/* 3) Fieldset neo-glass compatti e confinati */
#opFilterDlg fieldset {
  background: color-mix(in srgb, var(--panel-2), transparent 22%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 40%);
  border-radius: 10px;
  padding: 10px 12px;               /* compatto */
  margin: 0;                        /* elimina margini impliciti */
  min-width: 0;                     /* evita che â€œspinganoâ€ la colonna */
}

/* 4) Legenda piccola e coerente */
#opFilterDlg legend {
  font-size: 13px;
  margin-bottom: 6px;
  white-space: nowrap;
}

/* 5) Gruppi checkbox SEMPRE a 3 colonne */
#opFilterDlg .checks {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  gap: 10px 12px !important;        /* compatto ma leggibile */
  align-items: start;
  min-width: 0;                      /* evita overflow del gruppo */
}

/* 6) Chip: centrati, compatti, no overflow */
#opFilterDlg .checks label {
  display: inline-flex !important;
  justify-content: center;
  align-items: center;
  width: 100%;
  min-width: 0;                      /* consente il wrap interno */
  padding: 6px 12px;                 /* leggermente piÃ¹ stretto del default */
  border-radius: 18px;
  position: relative;
  overflow: hidden;                  /* contiene il ripple */
  white-space: nowrap;               /* chip su una riga */
}

/* 7) Il checkbox resta nascosto ma â€œnon occupa spazioâ€ */
#opFilterDlg .checks input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

/* 8) Se i gruppi sono â€œimportantiâ€, possiamo farli occupare lâ€™intera riga */
#opFilterDlg fieldset:has(#opfPrioGroup),
#opFilterDlg fieldset:has(#opfStatusGroup) {
  grid-column: 1 / -1;              /* il blocco si espande su tutta la riga */
}

/* 9) Stop sovrapposizioni: il dialog contiene tutto e attiva lo scroll quando serve */
#opFilterDlg.modal {
  max-width: 96vw;                   /* resta nel viewport */
  max-height: 92vh;
  overflow: hidden;                  /* il contenitore non â€œsforaâ€ visivamente */
}
#opFilterDlg .modal-body {
  overflow: auto;                    /* scroll interno pulito quando necessario */
}

/* 10) Micro-tweak: input/placeholder leggibili ma compatti */
#opFilterDlg input::placeholder {
  color: color-mix(in srgb, var(--txt), transparent 45%);
}
#opFilterDlg label { white-space: nowrap; } /* etichette su una riga */

/* ============================================================
   OP FILTER â€” replica ESATTA dello stile compatto CRQ
   ============================================================ */

/* --- 1) Grid principale: 3 colonne compatte â€” come CRQ --- */
#opFilterDlg .modal-body {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  column-gap: 18px !important;
  row-gap: 14px !important;
  padding-top: 10px !important;
  align-items: start !important;
  min-width: 0 !important;
}

/* --- 2) Etichette CRQ-style --- */
#opFilterDlg label {
  font-size: var(--fs-sm) !important;   /* stesso font del CRQ */
  white-space: nowrap !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 6px !important;
}

/* --- 3) Input: stessa altezza, stesso font, stessa compattezza --- */
#opFilterDlg input,
#opFilterDlg select {
  height: 34px !important;
  font-size: var(--fs-sm) !important;
  padding: 6px 10px !important;
  min-width: 0 !important;
  box-sizing: border-box !important;
}

/* --- 4) Fieldset identici a CRQ --- */
#opFilterDlg fieldset {
  grid-column: 1 / -1;                 /* CRQ usa full-row */
  background: color-mix(in srgb, var(--panel-2), transparent 22%) !important;
  border: 1px solid color-mix(in srgb, var(--border), transparent 40%) !important;
  border-radius: 10px !important;
  padding: 14px !important;
  min-width: 0 !important;
}

#opFilterDlg legend {
  font-size: 13px !important;
  margin-bottom: 8px !important;
  padding: 0 6px !important;
  white-space: nowrap;
}

/* --- 5) CHIP identici CRQ --- */
#opFilterDlg .checks {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  gap: 10px 12px !important;
  min-width: 0 !important;
}

#opFilterDlg .checks label {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  width: 100% !important;
  padding: 6px 10px !important;
  font-size: 13px !important;
  border-radius: 20px !important;
  background: rgba(255,255,255,0.06) !important;
  border: 1px solid rgba(255,255,255,0.15) !important;
  white-space: nowrap !important;
  cursor: pointer;
  position: relative;
  overflow: hidden;  /* per ripple */
}

/* Checkbox nascosto, come CRQ */
#opFilterDlg .checks input[type="checkbox"] {
  position: absolute !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Chip attivo */
#opFilterDlg .checks input[type="checkbox"]:checked + label {
  background: rgba(99,230,255,0.18) !important;
  border-color: rgb(99,230,255) !important;
  box-shadow: 0 0 6px rgba(99,230,255,0.5) !important;
}

/* --- 6) Ripple identico CRQ --- */
#opFilterDlg .checks label::after {
  content: "";
  position: absolute;
  width: 8px;
  height: 8px;
  background: rgba(99,230,255,0.55);
  border-radius: 50%;
  opacity: 0;
  transform: scale(1);
  transition: opacity .45s ease, transform .45s ease;
}
#opFilterDlg .checks label:active::after {
  opacity: 0.9;
  transform: scale(14);
  left: var(--r-x, 50%);
  top: var(--r-y, 50%);
}

/* --- 7) Nessuna sovrapposizione nel dialog --- */
#opFilterDlg.modal {
  max-width: 96vw !important;
  max-height: 92vh !important;
  overflow: hidden !important;
}
#opFilterDlg .modal-body {
  overflow-y: auto !important;
}

/* --- 8) Bottoni finali identici CRQ --- */
#opFilterDlg .actions.end {
  grid-column: 1 / -1 !important;
  display: flex !important;
  justify-content: flex-end !important;
  gap: 12px !important;
}

/* PRIORITÃ€ e STATO â†’ fieldset a 3 colonne (full-row) */
#opFilterDlg fieldset:has(#opfPrioGroup),
#opFilterDlg fieldset:has(#opfStatusGroup) {
  grid-column: 1 / -1 !important;   /* estende il box su tutte le 3 colonne */
}

/* ============================================================
   OP FILTER â€” Forza struttura uguale al CRQ
   ============================================================ */

/* 1) La grid PRINCIPALE deve essere quella del modal-body */
#opFilterDlg .modal-body {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  column-gap: 18px !important;
  row-gap: 14px !important;
  min-width: 0 !important;
  align-items: start !important;
  padding-top: 10px !important;
}

/* 2) CANCELLA layout indesiderati che rompono la grid */
#opFilterDlg .opf-grid,
#opFilterDlg .row2 {
  display: contents !important;   /* ðŸ”¥ magia: i figli entrano nella grid principale */
}

/* 3) PRIORITÃ€ e STATO full-width (3 colonne) */
#opFilterDlg fieldset:has(#opfPrioGroup),
#opFilterDlg fieldset:has(#opfStatusGroup) {
  grid-column: 1 / -1 !important; /* prende TUTTE le 3 colonne */
  min-width: 0 !important;
}

/* 4) Chip layout: 3 colonne interne compatte */
#opFilterDlg .checks {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0,1fr)) !important;
  gap: 10px 12px !important;
  min-width: 0 !important;
}

/* 5) Etichette e input uniformi CRQ */
#opFilterDlg label {
  white-space: nowrap !important;
  font-size: var(--fs-sm) !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 6px !important;
}

#opFilterDlg input,
#opFilterDlg select {
  height: 34px !important;
  padding: 6px 10px !important;
  font-size: var(--fs-sm) !important;
  min-width: 0 !important;
  box-sizing: border-box !important;
}

/* ============================================================
   OP FILTER â€” Solo i fieldset con checkbox occupano 3 colonne
   ============================================================ */

/* 1) Assicurati che il dialog OP usi una grid a 3 colonne */
#opFilterDlg .modal-body {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  gap: 14px 18px !important;
  align-items: start !important;
  min-width: 0 !important;
}

/* 2) I fieldset PrioritÃ  e Stato devono diventare figli diretti della grid */
#opFilterDlg .opf-grid,
#opFilterDlg .row2 {
  display: contents !important;   /* << IMPORTANTE: non rompe gli altri campi */
}

/* 3) SOLO PrioritÃ  e Stato â†’ span 3 colonne */
#opFilterDlg fieldset:has(#opfPrioGroup),
#opFilterDlg fieldset:has(#opfStatusGroup) {
  grid-column: 1 / -1 !important;    /* occupano tutte e 3 le colonne */
  min-width: 0 !important;
}

/* 4) Internamente i chip restano 3 colonne */
#opFilterDlg #opfPrioGroup,
#opFilterDlg #opfStatusGroup {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  gap: 10px 12px !important;
  min-width: 0 !important;
}

/* 1) Rendi i fieldset figli diretti della griglia principale */
#opFilterDlg .opf-grid {
    display: contents !important;
}

/* 2) Forza la griglia principale a 3 colonne */
#opFilterDlg .modal-body {
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    gap: 14px 18px !important;
    min-width: 0 !important;
    align-items: start !important;
}

/* 3) SOLO PrioritÃ  e Stato â†’ span 3 colonne */
#opFilterDlg fieldset:has(#opfPrioGroup),
#opFilterDlg fieldset:has(#opfStatusGroup) {
    grid-column: 1 / -1 !important;
    min-width: 0 !important;
}

/* 1) Rendi opf-groups trasparente alla grid */
#opFilterDlg .opf-groups {
    display: contents !important;
}

/* 2) Forza la griglia principale a 3 colonne */
#opFilterDlg .modal-body.opf-grid {
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    gap: 14px 18px !important;
}

/* 3) SOLO questi due fieldset devono span-nare */
#opFilterDlg fieldset:has(#opfPrioGroup),
#opFilterDlg fieldset:has(#opfStatusGroup) {
    grid-column: 1 / -1 !important;
}

/* OP & SVC â€” rimuove contenitori che impediscono lo span */
#opFilterDlg .opf-grid,
#opFilterDlg .opf-groups,
#opFilterDlg .row2,
#svcFilterDlg .modal-body.form-grid,
#svcFilterDlg .row,
#svcFilterDlg .row2 {
    display: contents !important;
}

/* OP */
#opFilterDlg .modal-body {
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0,1fr)) !important;
    gap: 14px 18px !important;
    min-width: 0 !important;
}

/* SVC */
#svcFilterDlg .modal-body {
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0,1fr)) !important;
    gap: 14px 18px !important;
    min-width: 0 !important;
}

/* OP â†’ PrioritÃ  + Stato */
#opFilterDlg fieldset:has(#opfPrioGroup),
#opFilterDlg fieldset:has(#opfStatusGroup) {
    grid-column: 1 / -1 !important;
    min-width: 0;
}

/* SVC â†’ Tipo + Stato (se presente) */
#svcFilterDlg fieldset:has(#svcfTipoGroup),
#svcFilterDlg fieldset:has(#svcfStatoGroup) {
    grid-column: 1 / -1 !important;
    min-width: 0;
}

#opFilterDlg fieldset,
#svcFilterDlg fieldset {
    background: color-mix(in srgb, var(--panel-2), transparent 22%) !important;
    border: 1px solid color-mix(in srgb, var(--border), transparent 40%) !important;
    border-radius: 12px !important;
    padding: 14px 16px !important;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

#opFilterDlg legend,
#svcFilterDlg legend {
    font-size: 13px !important;
    margin-bottom: 6px !important;
    padding: 0 6px;
    color: var(--txt);
}

/* Nasconde il quadratino */
#opFilterDlg input[type="checkbox"],
#svcFilterDlg input[type="checkbox"] {
    position: absolute !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* label come chip CRQ */
#opFilterDlg label.checkbox,
#svcFilterDlg label.checkbox {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 6px 14px !important;
    border-radius: 20px !important;
    font-size: 13px !important;
    cursor: pointer;
    background: rgba(255,255,255,0.06) !important;
    border: 1px solid rgba(255,255,255,0.15) !important;
    white-space: nowrap !important;
    position: relative !important;
    overflow: hidden !important; /* per ripple */
}

/* attivo */
#opFilterDlg input[type="checkbox"]:checked + label,
#svcFilterDlg input[type="checkbox"]:checked + label {
    background: rgba(99,230,255,0.18) !important;
    border-color: rgb(99,230,255) !important;
    box-shadow: 0 0 6px rgba(99,230,255,0.5) !important;
}

#opFilterDlg label.checkbox::after,
#svcFilterDlg label.checkbox::after {
    content:"";
    position:absolute;
    width:8px;
    height:8px;
    background:rgba(99,230,255,0.55);
    border-radius:50%;
    opacity:0;
    transform:scale(1);
    transition:opacity .45s ease, transform .45s ease;
}
#opFilterDlg label.checkbox:active::after,
#svcFilterDlg label.checkbox:active::after {
    opacity:.9;
    transform:scale(14);
    left:var(--r-x,50%);
    top:var(--r-y,50%);
}


#opFilterDlg label[for="opfMaxOnly"] {
    display: inline-flex !important;
    align-items: center !important;
    gap: 10px;
}

#opfPrioGroup,
#opfStatusGroup,
#svcfTipoGroup,
#svcfStatoGroup {
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0,1fr)) !important;
    gap: 10px 12px !important;
    min-width: 0 !important;
}

/* SOLO per checkbox singoli come "PrioritÃ  massima" */

/* Lâ€™input resta dentro il label ma invisibile */
#opFilterDlg label.checkbox input[type="checkbox"] {
    position: absolute;
    opacity: 0;
    inset: 0;              /* rimane cliccabile */
    cursor: pointer;
}

/* Il label diventa un chip CRQ */
#opFilterDlg label.checkbox {
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 13px;
    cursor: pointer;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.15);
    position: relative;
    overflow: hidden;
    white-space: nowrap;
}

/* Stato attivo */
#opFilterDlg label.checkbox:has(input[type="checkbox"]:checked) {
    background: rgba(99,230,255,0.18);
    border-color: rgb(99,230,255);
    box-shadow: 0 0 6px rgba(99,230,255,0.5);
}

/* Ripple CRQ */
#opFilterDlg label.checkbox::after {
    content: "";
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(99,230,255,0.55);
    opacity: 0;
    transform: scale(1);
    transition: opacity .45s ease, transform .45s ease;
}

#opFilterDlg label.checkbox:active::after {
    opacity: 0.9;
    transform: scale(14);
    left: 50%;
    top: 50%;
}

/* OP FILTER â€” â€œSolo PrioritÃ  massimaâ€ su 3 colonne */
#opFilterDlg label.checkbox:has(#opfMaxOnly) {
    grid-column: 1 / -1 !important;   /* span su tutte le 3 colonne */
    width: 100% !important;
    justify-content: center !important;  /* centra il chip */
}

/* ============================================================
   HELP CRQ â€” Forza testo e tabella in chiaro (tema NeoGlass)
   ============================================================ */

#helpCrqDlg,
#helpCrqDlg * {
    color: var(--txt) !important;
}

/* Celle tabella in chiaro */
#helpCrqDlg table td,
#helpCrqDlg table th {
    color: var(--txt) !important;
}

/* Sfondo celle coerente con le altre tabelle */
#helpCrqDlg table td,
#helpCrqDlg table th {
    background: color-mix(in srgb, var(--panel-2), transparent 20%) !important;
    border-color: color-mix(in srgb, var(--border), transparent 30%) !important;
}

/* Testo piÃ¹ leggibile nella colonna note */
#helpCrqDlg td:last-child {
    color: var(--txt) !important;
}

/* Legenda / header dialog */
#helpCrqDlg .modal-head strong,
#helpCrqDlg .modal-head {
    color: var(--txt) !important;
}

/* ============================================================
   SERVIZI â€” COMPACT SERVICE DIALOG
   Riduce altezza, spazi, textarea, padding, griglia
   ============================================================ */

/* Dialog meno alto */
#serviceDialog.modal {
    max-height: 85vh !important;
    width: min(900px, 92vw) !important;
}

/* Griglia piÃ¹ compatta (da 2 colonne â†’ piÃ¹ dense) */
#serviceDialog .form-grid {
    gap: 10px !important;                 /* meno spazio verticale */
    grid-template-columns: repeat(2, 1fr) !important;
}

/* Campi piÃ¹ compatti */
#serviceDialog .form-grid label {
    gap: 4px !important;                  /* meno spazio label/campo */
}

/* Input/select piÃ¹ bassi */
#serviceDialog input,
#serviceDialog select {
    height: 34px !important;
    padding: 6px 10px !important;
    font-size: 13px !important;
}

/* Textarea meno alti */
#serviceDialog textarea {
    min-height: 80px !important;          /* prima era 110px+ */
    padding: 8px 10px !important;
    font-size: 13px !important;
    resize: vertical;
}

/* Riduci padding interno del modal */
#serviceDialog .modal-body {
    padding: 14px 16px !important;
}

/* Head piÃ¹ compatta */
#serviceDialog .modal-head {
    padding: 12px 16px !important;
}

/* ============================================================
   SERVIZI â€” FORM A 3 COLONNE + CAMPI LONG FORM A SPAN 3
   ============================================================ */

/* 1) La griglia principale diventa a 3 colonne */
#serviceDialog .form-grid {
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
    column-gap: 18px !important;
    row-gap: 14px !important;
    align-items: start !important;
}

/* 2) Rende tutti i label â€œnormaliâ€ a 1 colonna */
#serviceDialog .form-grid > label {
    grid-column: span 1 !important;
    min-width: 0;
}

/* 3) I campi lunghi (giÃ  col-2) diventano SPAN 3 */
#serviceDialog .form-grid > label.col-2 {
    grid-column: 1 / -1 !important;   /* span su tutte e 3 le colonne */
}

/* EXTRA: migliora compattezza dei textarea */
#serviceDialog textarea {
    min-height: 80px !important;
    resize: vertical;
}
/* SVC Filter â€” grid principale a 3 colonne */
#svcFilterDlg .modal-body {
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0,1fr)) !important;
    column-gap: 18px !important;
    row-gap: 14px !important;
    align-items: start !important;
    min-width: 0 !important;
}

/* Rende i wrapper invisibili alla griglia */
#svcFilterDlg .row,
#svcFilterDlg .row2,
#svcFilterDlg .form-grid {
    display: contents !important;
}

/* Tutti i label/field normali occupano 1 colonna */
#svcFilterDlg .modal-body > label {
    grid-column: span 1 !important;
    min-width: 0 !important;
}

/* Tipo e Stato â€” gruppi checkbox span su 3 colonne */
#svcFilterDlg fieldset:has(#svcfTipoGroup),
#svcFilterDlg fieldset:has(#svcfStatoGroup) {
    grid-column: 1 / -1 !important;
    min-width: 0 !important;
}

/* Imposta i gruppi checkbox a 3 colonne interne */
#svcFilterDlg #svcfTipoGroup,
#svcFilterDlg #svcfStatoGroup {
    display: grid !important;
    grid-template-columns: repeat(3, minmax(0,1fr)) !important;
    gap: 10px 12px !important;
    min-width: 0 !important;
}

/* Nasconde lâ€™input ma resta cliccabile */
#svcFilterDlg input[type="checkbox"] {
    position: absolute !important;
    opacity: 0 !important;
    inset: 0 !important;
}

/* Label come chip */
#svcFilterDlg label[for^="svcf_"],
#svcFilterDlg #svcfTipoGroup label,
#svcFilterDlg #svcfStatoGroup label {
    display: inline-flex !important;
    align-items: center;
    justify-content: center;
    padding: 6px 14px;
    font-size: 13px;
    border-radius: 20px;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.15);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    white-space: nowrap;
}

/* Stato attivo */
#svcFilterDlg input[type="checkbox"]:checked + label {
    background: rgba(99,230,255,0.18);
    border-color: rgb(99,230,255);
    box-shadow: 0 0 6px rgba(99,230,255,0.5);
}

/* Ripple */
#svcFilterDlg label::after {
    content:"";
    position:absolute;
    width:8px;
    height:8px;
    background:rgba(99,230,255,0.55);
    border-radius:50%;
    opacity:0;
    transform:scale(1);
    transition:opacity .45s ease, transform .45s ease;
}
#svcFilterDlg label:active::after {
    opacity:0.9;
    transform:scale(14);
    left:var(--r-x,50%);
    top:var(--r-y,50%);
}

#svcFilterDlg fieldset {
    background: color-mix(in srgb, var(--panel-2), transparent 22%) !important;
    border: 1px solid color-mix(in srgb, var(--border), transparent 40%) !important;
    border-radius: 12px;
    padding: 14px 16px !important;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

#svcFilterDlg legend {
    font-size: 13px;
    margin-bottom: 6px;
    padding: 0 6px;
    white-space: nowrap;
    color: var(--txt);
}

/* ============================================================
   SVC FILTER â€” Griglia 3 colonne + gruppi checkbox full width
   Replica stile/struttura CRQ
   ============================================================ */

/* A. Impone la griglia a 3 colonne sul body del dialog */
#svcFilterDlg .modal-body {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  column-gap: 18px !important;
  row-gap: 14px !important;
  align-items: start !important;
  min-width: 0 !important;
}

/* B. Rende trasparenti i wrapper intermedi (cosÃ¬ i figli entrano nella grid) */
#svcFilterDlg form,
#svcFilterDlg .form,
#svcFilterDlg .form-grid,
#svcFilterDlg .row,
#svcFilterDlg .row2,
#svcFilterDlg .svcf-grid {
  display: contents !important;
}

/* C. Tutti i campi "normali" occupano 1 colonna */
#svcFilterDlg .modal-body > label,
#svcFilterDlg .modal-body > .field,
#svcFilterDlg .modal-body > .control {
  grid-column: span 1 !important;
  min-width: 0 !important;
}

/* D. Fieldset stile CRQ */
#svcFilterDlg fieldset {
  background: color-mix(in srgb, var(--panel-2), transparent 22%) !important;
  border: 1px solid color-mix(in srgb, var(--border), transparent 40%) !important;
  border-radius: 12px !important;
  padding: 14px 16px !important;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-width: 0 !important;
}
#svcFilterDlg legend {
  font-size: 13px !important;
  margin-bottom: 6px !important;
  padding: 0 6px;
  color: var(--txt);
  white-space: nowrap;
}

/* E. GRUPPI CHECKBOX = 3 colonne interne (chips) */
#svcFilterDlg #svcfTipoGroup,
#svcFilterDlg #svcfStatoGroup {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  gap: 10px 12px !important;
  min-width: 0 !important;
}

/* F. Checkbox â†’ chip (stile CRQ) */
#svcFilterDlg input[type="checkbox"] {
  position: absolute !important;
  opacity: 0 !important;
  inset: 0 !important;
  pointer-events: none !important;  /* il click va sulla label */
}
#svcFilterDlg #svcfTipoGroup label,
#svcFilterDlg #svcfStatoGroup label,
#svcFilterDlg label[for^="svcf_"] {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 6px 14px !important;
  font-size: 13px !important;
  border-radius: 20px !important;
  background: rgba(255,255,255,0.06) !important;
  border: 1px solid rgba(255,255,255,0.15) !important;
  cursor: pointer !important;
  position: relative !important;
  overflow: hidden !important;
  white-space: nowrap !important;
}
#svcFilterDlg input[type="checkbox"]:checked + label {
  background: rgba(99,230,255,0.18) !important;
  border-color: rgb(99,230,255) !important;
  box-shadow: 0 0 6px rgba(99,230,255,0.5) !important;
}
/* Ripple */
#svcFilterDlg #svcfTipoGroup label::after,
#svcFilterDlg #svcfStatoGroup label::after,
#svcFilterDlg label[for^="svcf_"]::after {
  content:"";
  position:absolute;
  width:8px; height:8px; border-radius:50%;
  background:rgba(99,230,255,0.55);
  opacity:0; transform:scale(1);
  transition:opacity .45s ease, transform .45s ease;
}
#svcFilterDlg #svcfTipoGroup label:active::after,
#svcFilterDlg #svcfStatoGroup label:active::after,
#svcFilterDlg label[for^="svcf_"]:active::after {
  opacity:.9; transform:scale(14);
  left:var(--r-x,50%); top:var(--r-y,50%);
}

/* G. SPAN 3 COLONNE dei gruppi checkbox (con fallback a classe JS) */
#svcFilterDlg fieldset:has(#svcfTipoGroup),
#svcFilterDlg fieldset:has(#svcfStatoGroup),
#svcFilterDlg fieldset.full-span {
  grid-column: 1 / -1 !important;  /* â† full width */
}

#svcFilterDlg .modal-body.grid-3 {
  display: grid !important;
  grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
  column-gap: 18px !important;
  row-gap: 14px !important;
}

/* ============================================================
   SERVIZI â€” Checkbox Tipo & Stato â†’ 4 colonne interne
   ============================================================ */

#svcFilterDlg #svcfTipoGroup,
#svcFilterDlg #svcfStatoGroup {
    display: grid !important;
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important; /* DA 3 â†’ 4 COLONNE */
    gap: 10px 12px !important;
    min-width: 0 !important;
}

#svcFilterDlg #svcfTipoGroup,
#svcFilterDlg #svcfStatoGroup {
    display: grid !important;
    grid-template-columns: repeat(4, minmax(0,1fr)) !important;
    gap: 10px 12px !important;
}

#svcFilterDlg .svc-chip {
    display: contents !important; /* cosÃ¬ input+label restano fratelli ma sotto la grid */
}

/* ============================================================
   SVC Filter â€” Tipo/Stato: 4 colonne interne + full-span
   (override robusto del .checks { display:flex !important; })
   ============================================================ */

/* A) I due gruppi (Tipo, Stato) diventano griglie a 4 colonne */
#svcFilterDlg #svcfTipoGroup.checks,
#svcFilterDlg #svcfStatoGroup.checks,
#svcFilterDlg fieldset:has(#svcfTipoGroup) .checks,
#svcFilterDlg fieldset:has(#svcfStatoGroup) .checks {
  display: grid !important;
  grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  gap: 10px 12px !important;
  align-items: start !important;
  min-width: 0 !important;
}

/* B) Le â€œpillâ€ si allargano alla larghezza della propria colonna e
      il testo Ã¨ centrato (come nei CRQ) */
#svcFilterDlg #svcfTipoGroup.checks label,
#svcFilterDlg #svcfStatoGroup.checks label,
#svcFilterDlg fieldset:has(#svcfTipoGroup) .checks label,
#svcFilterDlg fieldset:has(#svcfStatoGroup) .checks label {
  width: 100% !important;
  justify-content: center !important;
  white-space: nowrap !important;
}

/* C) I fieldset di Tipo e Stato restano â€œfull rowâ€ (3 colonne del dialog) */
#svcFilterDlg fieldset:has(#svcfTipoGroup),
#svcFilterDlg fieldset:has(#svcfStatoGroup) {
  grid-column: 1 / -1 !important;
  min-width: 0 !important;
}
/* Stessa altezza e font dei CRQ */
#svcFilterDlg .checks label {
  padding: 6px 14px !important;
  font-size: 13px !important;
  border-radius: 20px !important;
}

.notif-list {
  display: grid;
  gap: 12px;
}

.notif-item {
  padding: 12px 14px;
  border-radius: var(--radius-md);
  background: color-mix(in srgb, var(--panel-2), transparent 20%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
  box-shadow: var(--shadow-1);
}

.notif-item.critica {
  border-color: #ff5064;
  background: rgba(255, 80, 100, 0.1);
}

.notif-item.avviso {
  border-color: #ffd452;
  background: rgba(255, 212, 82, 0.1);
}

.notif-item.ok {
  border-color: #4aff72;
  background: rgba(80, 255, 120, 0.1);
}

/* Footer modale con pulsante in basso a destra */
.modal-footer {
  display: flex;
  justify-content: flex-end;
  padding: var(--pad);
  border-top: 1px solid color-mix(in srgb, var(--border), transparent 25%);
  background: color-mix(in srgb, var(--panel-2), transparent 10%);
  border-bottom-left-radius: var(--radius);
  border-bottom-right-radius: var(--radius);
}

/* Assicura coerenza con gli altri modali */
#notifDlg .modal-body {
  padding: var(--pad);
}

/* ======= DIALOG NOTIFICHE â€“ TESTI CHIARI ======= */

#notifDlg,
#notifDlg * {
  color: var(--txt) !important;
}

/* Titoli delle sezioni (Open Point / CRQ) */
#notifDlg h3 {
  font-size: var(--fs-md);
  font-weight: 700;
  margin-bottom: 10px;
  color: var(--txt) !important;
}

/* Testi interni delle notifiche */
#notifDlg .notif-item {
  color: var(--txt) !important;
}

/* Etichette in grassetto */
#notifDlg .notif-item strong {
  color: var(--txt) !important;
}

/* Messaggio "nessuna notifica" */
#notifDlg .muted {
  color: var(--txt) !important;
  opacity: 0.8;
}

/* ===============================
   SEZIONE NOTIFICHE - NEON STYLE
   =============================== */

/* Sezioni */
#notifDlg h3 {
  color: var(--txt) !important;
  font-weight: 700;
  margin-bottom: 12px;
  text-shadow: 0 0 6px rgba(99, 230, 255, 0.4);
}

/* Separatore silver/cyan */
.notif-sep {
  margin: 20px 0 12px 0;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    color-mix(in srgb, var(--neon-color), transparent 40%),
    transparent
  );
  box-shadow: 0 0 6px color-mix(in srgb, var(--neon-color), transparent 65%);
}

/* Contenitore della notifica */
.notif-item {
  padding: 16px;
  border-radius: var(--radius-md);
  border: 1px solid color-mix(in srgb, var(--border), transparent 40%);
  background: color-mix(in srgb, var(--panel-2), transparent 20%);
  box-shadow: var(--shadow-1);
  transition: 0.25s ease;
}

/* Intestazione (icona + testo) */
.notif-head {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

/* Icone neon */
.notif-icon {
  font-size: 22px;
  filter: drop-shadow(0 0 6px var(--neon-color))
          drop-shadow(0 0 10px color-mix(in srgb, var(--neon-color), transparent 40%));
}

/* Microâ€‘glow dei gruppi */
.notif-item.ok {
  border-color: #4aff72;
  box-shadow: 0 0 12px rgba(80, 255, 120, 0.35);
}

.notif-item.avviso {
  border-color: #ffd452;
  box-shadow: 0 0 12px rgba(255, 212, 82, 0.35);
}

.notif-item.critica {
  border-color: #ff5064;
  box-shadow: 0 0 12px rgba(255, 80, 100, 0.35);
}

/* On hover: aumentiamo il glow */
.notif-item:hover {
  transform: translateY(-2px);
  box-shadow:
    0 0 18px rgba(99, 230, 255, 0.2),
    0 0 28px rgba(99, 230, 255, 0.15);
}

/* Campi */
.notif-field strong {
  color: var(--txt) !important;
}

/* Descrizione dellâ€™Open Point nel pannello notifiche */
.notif-desc {
  margin-top: 10px;
  padding: 12px 14px;
  border-radius: var(--radius-sm);

  background: color-mix(in srgb, var(--panel-2), transparent 10%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 35%);

  color: var(--txt);
  font-size: var(--fs-sm);
  line-height: 1.45;

  /* Glow leggerissimo */
  box-shadow:
    0 0 6px rgba(99, 230, 255, 0.15),
    inset 0 0 6px rgba(99, 230, 255, 0.12);
}

.notif-desc-collapsible {
  margin-top: 10px;
}

.notif-desc-content {
  margin-top: 8px;
  padding: 12px 14px;
  border-radius: var(--radius-sm);
  background: color-mix(in srgb, var(--panel-2), transparent 12%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
  box-shadow:
    0 0 6px rgba(99,230,255,0.15),
    inset 0 0 6px rgba(99,230,255,0.12);
  line-height: 1.45;
}

/* Pulsante testuale neon */
.link-btn {
  background: none;
  border: none;
  padding: 0;
  color: var(--pri);
  font-size: var(--fs-sm);
  cursor: pointer;
}

.link-btn:hover {
  text-decoration: underline;
}

/* ================================
   Banner Notifiche (red neon)
   ================================ */
.toolbar {
  position: relative; /* serve per l'ancoraggio del banner */
}

/* Contenitore banner */
#notifBanner.notif-banner {
  position: absolute;
  /* posizioniamo il banner in corrispondenza del bottone 'Notifiche' */
  /* Se vuoi regolarlo finemente, gioca con right/left/top */
  right: 0;                 /* allineato al bordo destro della toolbar */
  transform: translateY(-60%); /* sollevato sopra i pulsanti */
  
  display: inline-flex;
  align-items: center;
  gap: 10px;

  padding: 8px 12px;
  border-radius: 12px;

  color: #fff;
  background: linear-gradient(
    180deg,
    rgba(255, 65, 90, 0.95),
    rgba(140, 15, 30, 0.92)
  );

  border: 1px solid rgba(255, 90, 110, 0.9);
  box-shadow:
    0 0 12px rgba(255, 70, 90, 0.65),
    0 0 26px rgba(255, 70, 90, 0.35),
    0 10px 24px rgba(0, 0, 0, .35);

  backdrop-filter: blur(8px);
  z-index: 12;
}

/* Puntino pulsante â€œallarmeâ€ */
#notifBanner .dot {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: radial-gradient(circle at 40% 30%, #ff9099, #ff475f);
  box-shadow:
    0 0 10px rgba(255, 100, 120, .9),
    0 0 18px rgba(255, 70, 90, .6);
  flex: 0 0 auto;
}

/* Testo del banner */
#notifBannerText {
  font-weight: 700;
  letter-spacing: .2px;
}

/* Variante compatta su schermi stretti */
@media (max-width: 640px) {
  #notifBanner.notif-banner {
    right: 8px;
    transform: translateY(-55%);
    padding: 6px 10px;
  }
  #notifBannerText {
    font-size: var(--fs-sm);
  }
}

/* Il bottone diventa il riferimento di posizionamento */
#notifBtn {
  position: relative;
}

/* Banner ancorato al bottone */
#notifBanner.notif-banner {
  position: absolute;
  left: 50%;
  bottom: 100%;
  transform: translate(-50%, -8px); /* centrato sopra al bottone, 8px di distanza */
  z-index: 5;
}

/* ===== Badge "numero notifiche" nel bottone ðŸ”” ===== */
#notifBtn {
  position: relative; /* per eventuali posizionamenti futuri */
}

/* Badge visivo (numero) */
#notifBadge {
  display: inline-flex;
  align-items: center;
  justify-content: center;

  /* dimensioni e tipografia */
  min-width: 26px;
  height: 26px;
  padding: 0 8px;

  font-weight: 800;
  font-size: 18px;       /* << numero piÃ¹ grosso */
  line-height: 1;
  letter-spacing: .2px;

  /* colori "red neon" */
  color: #fff;
  background: radial-gradient(circle at 40% 30%, #ff5a6d, #c5162b);
  border: 1px solid rgba(255, 90, 110, 0.9);
  border-radius: 999px;

  /* glow */
  box-shadow:
    0 0 8px rgba(255, 80, 100, .6),
    0 0 16px rgba(255, 80, 100, .35);
}

/* un filo di spazio dal testo "Notifiche" */
#notifBtn #notifBadge {
  margin-left: 8px;
}

/* ================================
   Bottone Notifiche in stato alert
   ================================ */
#notifBtn.alert {
  border-color: rgba(255, 80, 100, 0.9) !important;
  background: linear-gradient(
    180deg,
    rgba(255, 70, 90, 0.20),
    rgba(120, 10, 20, 0.25)
  ) !important;
  color: #ff9aa7 !important;
  box-shadow:
    0 0 12px rgba(255, 80, 100, 0.7),
    0 0 22px rgba(255, 80, 100, 0.45),
    inset 0 0 8px rgba(255, 80, 100, 0.35) !important;
  transition: 0.25s ease;
}

/* Hover ancora piÃ¹ reattivo */
#notifBtn.alert:hover {
  box-shadow:
    0 0 16px rgba(255, 90, 110, 0.85),
    0 0 30px rgba(255, 90, 110, 0.55),
    inset 0 0 12px rgba(255, 80, 100, 0.55) !important;
  transform: translateY(-1px);
}

/* ================================
   ANIMAZIONE PULSE ROSSO-NEON
   ================================ */

@keyframes notifPulse {
  0% {
    box-shadow:
      0 0 10px rgba(255, 80, 100, 0.6),
      0 0 20px rgba(255, 80, 100, 0.4),
      inset 0 0 8px rgba(255, 80, 100, 0.4);
    border-color: rgba(255, 80, 100, 1);
  }

  50% {
    box-shadow:
      0 0 18px rgba(255, 60, 80, 0.85),
      0 0 32px rgba(255, 60, 80, 0.45),
      inset 0 0 12px rgba(255, 90, 110, 0.65);
    border-color: rgba(255, 120, 140, 1);
  }

  100% {
    box-shadow:
      0 0 10px rgba(255, 80, 100, 0.6),
      0 0 20px rgba(255, 80, 100, 0.4),
      inset 0 0 8px rgba(255, 80, 100, 0.4);
    border-color: rgba(255, 80, 100, 1);
  }
}

/* Applichiamo il pulse SOLO quando ci sono notifiche */
#notifBtn.alert {
  animation: notifPulse 1.8s infinite ease-in-out;
}

/* ====== TABS NOTIFICHE ====== */

.notif-tabs {
  display: flex;
  gap: 10px;
  margin: 10px 0 18px 0;
}

.notif-tab {
  flex: 1;
  padding: 10px 14px;
  border-radius: var(--radius-md);
  background: color-mix(in srgb, var(--panel-2), transparent 20%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 40%);
  color: var(--txt);
  font-weight: 600;
  cursor: pointer;
  transition: 0.25s;
  text-align: center;
}

.notif-tab:hover {
  background: color-mix(in srgb, var(--panel-2), transparent 10%);
}

.notif-tab.active {
  background: rgba(99,230,255,0.15);
  border-color: rgba(99,230,255,0.85);
  color: #aaf6ff;
  box-shadow:
    0 0 8px rgba(99,230,255,0.5),
    0 0 16px rgba(99,230,255,0.3);
}

.notif-tab-content {
  display: none;
}

.notif-tab-content.active {
  display: block;
}

/* Contenitore dei counter dentro le tab */
.notif-tab-counts {
  margin-left: 6px;
  display: inline-flex;
  gap: 6px;
  font-size: 14px;
  font-weight: 700;
  opacity: 0.9;
}

/* Icone gruppo neon */
.notif-count-green {
  color: #4aff72;
  text-shadow: 0 0 6px rgba(80,255,120,0.9);
}

.notif-count-yellow {
  color: #ffd452;
  text-shadow: 0 0 6px rgba(255,212,82,0.9);
}

.notif-count-red {
  color: #ff5064;
  text-shadow: 0 0 6px rgba(255,80,100,0.9);
}

/* ===========================
   DRAG & DROP â€“ DROP INDICATOR
   =========================== */

.link-drop-indicator {
  height: 8px;
  margin: 4px 0;
  border-radius: 6px;

  background: linear-gradient(
    90deg,
    rgba(0,255,255,0),
    rgba(0,255,255,0.7),
    rgba(0,255,255,0)
  );

  box-shadow:
    0 0 6px rgba(0,255,255,0.5),
    0 0 12px rgba(0,255,255,0.4),
    0 0 20px rgba(0,255,255,0.25);

  transition: 0.15s ease;
  pointer-events: none;
  opacity: 0;
}

.link-drop-indicator.active {
  opacity: 1;
}

/* Indicator overlay per DnD links */
#linkDropIndicator {
  position: absolute;
  width: 2px;
  background: linear-gradient(180deg, var(--neon-color, #63e6ff), var(--sec, #7b7dff));
  box-shadow: 0 0 12px var(--neon-color, #63e6ff);
  pointer-events: none;
  opacity: 0;
  z-index: 2;
}

.drop-placeholder {
  display: block;
  background: rgba(99, 230, 255, 0.10);
  border-radius: var(--radius-md);
  box-shadow: 0 0 12px rgba(99, 230, 255, 0.25);
  margin: 4px;
}

/* =====================================================================
   COLORI RIGHE TABELLE (OPEN POINTS + CRQ)
   ===================================================================== */

/* Rosso */
.row-red {
    background: rgba(255, 80, 100, 0.18) !important;
    border-left: 4px solid #ff5064 !important;
}

/* Giallo */
.row-yellow {
    background: rgba(255, 210, 80, 0.15) !important;
    border-left: 4px solid #ffd250 !important;
}

/* Verde */
.row-green {
    background: rgba(80, 255, 120, 0.16) !important;
    border-left: 4px solid #4aff73 !important;
}

/* ============================================================
   NEON ROW EFFECT (Open Points + CRQ)
   ============================================================ */

.row-red {
    --row-color: #ff5064;
    background: rgba(255, 80, 100, 0.15) !important;
    border-left: 4px solid var(--row-color) !important;
    animation: neonPulseRed 2.6s infinite ease-in-out;
}

.row-yellow {
    --row-color: #ffd250;
    background: rgba(255, 210, 80, 0.14) !important;
    border-left: 4px solid var(--row-color) !important;
    animation: neonPulseYellow 2.6s infinite ease-in-out;
}

.row-green {
    --row-color: #4aff73;
    background: rgba(80, 255, 120, 0.14) !important;
    border-left: 4px solid var(--row-color) !important;
    animation: neonPulseGreen 2.6s infinite ease-in-out;
}

/* Neon animations */
@keyframes neonPulseRed {
    0%, 100% { box-shadow: 0 0 6px rgba(255,80,100,0.5); }
    50%      { box-shadow: 0 0 14px rgba(255,80,100,0.8); }
}

@keyframes neonPulseYellow {
    0%, 100% { box-shadow: 0 0 6px rgba(255,210,80,0.45); }
    50%      { box-shadow: 0 0 14px rgba(255,210,80,0.75); }
}

@keyframes neonPulseGreen {
    0%, 100% { box-shadow: 0 0 6px rgba(74,255,115,0.45); }
    50%      { box-shadow: 0 0 14px rgba(74,255,115,0.75); }
}


/* ============================================================
   BADGE COLORATI PER LO STATO
   ============================================================ */

.badge.state-red {
    background: rgba(255, 80, 100, 0.18) !important;
    border-color: #ff5064 !important;
    color: #ff99a6 !important;
}

.badge.state-yellow {
    background: rgba(255, 210, 80, 0.20) !important;
    border-color: #ffd250 !important;
    color: #ffe8a6 !important;
}

.badge.state-green {
    background: rgba(80, 255, 120, 0.20) !important;
    border-color: #4aff73 !important;
    color: #b2ffcb !important;
}

/* ============================================================
   SERVIZI â€” COLORI RIGHE (come OP/CRQ) + NEON PULSE
   ============================================================ */

/* Rosso: NON ATTIVO */
.svc-row-red {
  --row-color: #ff5064;
  background: rgba(255, 80, 100, 0.15) !important;
  border-left: 4px solid var(--row-color) !important;
  animation: svcNeonRed 2.6s infinite ease-in-out;
}

/* Giallo: DEPRECATO */
.svc-row-yellow {
  --row-color: #ffd250;
  background: rgba(255, 210, 80, 0.14) !important;
  border-left: 4px solid var(--row-color) !important;
  animation: svcNeonYellow 2.6s infinite ease-in-out;
}

/* Verde: ATTIVO / OK */
.svc-row-green {
  --row-color: #4aff73;
  background: rgba(80, 255, 120, 0.14) !important;
  border-left: 4px solid var(--row-color) !important;
  animation: svcNeonGreen 2.6s infinite ease-in-out;
}

@keyframes svcNeonRed   { 0%,100%{ box-shadow:0 0 6px rgba(255,80,100,.5);} 50%{box-shadow:0 0 14px rgba(255,80,100,.8);} }
@keyframes svcNeonYellow{ 0%,100%{ box-shadow:0 0 6px rgba(255,210,80,.45);} 50%{box-shadow:0 0 14px rgba(255,210,80,.75);} }
@keyframes svcNeonGreen { 0%,100%{ box-shadow:0 0 6px rgba(74,255,115,.45);} 50%{box-shadow:0 0 14px rgba(74,255,115,.75);} }

/* ============================================================
   SERVIZI â€” BADGE STATO (coerenti con OP/CRQ)
   ============================================================ */
.badge.svc-state-red {
  background: rgba(255, 80, 100, 0.18) !important;
  border-color: #ff5064 !important;
  color: #ff99a6 !important;
}
.badge.svc-state-yellow {
  background: rgba(255, 210, 80, 0.20) !important;
  border-color: #ffd250 !important;
  color: #ffe8a6 !important;
}
.badge.svc-state-green {
  background: rgba(80, 255, 120, 0.20) !important;
  border-color: #4aff73 !important;
  color: #b2ffcb !important;
}

/* Notifiche: filtro assegnatario */
.notif-filter {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  margin: 6px 0 10px;
  background: color-mix(in srgb, var(--panel-2), transparent 20%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 30%);
  border-radius: 10px;
}
.notif-filter label {
  font-size: 13px;
  color: var(--txt);
  white-space: nowrap;
}
#notifAssigneeFilter {
  background: color-mix(in srgb, var(--panel-2), transparent 20%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 30%);
  color: var(--txt);
  padding: 6px 10px;
  border-radius: 8px;
  height: 34px;
  min-width: 220px;
  outline: none;
}
#notifAssigneeFilter:hover {
  border-color: color-mix(in srgb, var(--neon-color), transparent 50%);
}

/* ============================
   NOTIFICHE â€” HEADER LAYOUT
   ============================ */
.notif-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.notif-head-right {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

/* ============================
   SELECT NELL'HEADER (NEON)
   ============================ */
.notif-head-filter {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--panel-2), transparent 18%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--neon-color), transparent 75%) inset,
              0 0 16px color-mix(in srgb, var(--neon-color), transparent 70%);
}

.notif-head-filter .ico {
  font-size: 14px;
  filter: drop-shadow(0 0 6px color-mix(in srgb, var(--neon-color), transparent 40%));
}

/* Tipografia: usa il font dellâ€™app (giÃ  impostato a livello body) ma un filo piÃ¹ "deciso" */
#notifAssigneeFilter {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;

  font-weight: 600;
  font-size: var(--fs-sm);
  letter-spacing: .2px;

  color: var(--txt);
  background: transparent;
  border: 1px solid color-mix(in srgb, var(--border), transparent 65%);
  border-radius: 999px;
  padding: 6px 28px 6px 12px;

  /* Piccola caret custom */
  background-image:
    radial-gradient(circle at right 12px center, color-mix(in srgb, var(--neon-color), transparent 45%) 0 2px, transparent 3px),
    radial-gradient(circle at right 18px center, color-mix(in srgb, var(--neon-color), transparent 45%) 0 2px, transparent 3px);
  background-repeat: no-repeat;
}

#notifAssigneeFilter:hover {
  border-color: color-mix(in srgb, var(--neon-color), transparent 35%);
  box-shadow: 0 0 12px color-mix(in srgb, var(--neon-color), transparent 60%);
}

#notifAssigneeFilter:focus {
  outline: none;
  border-color: var(--neon-color);
  box-shadow: 0 0 0 1px var(--neon-color) inset,
              0 0 18px color-mix(in srgb, var(--neon-color), transparent 40%);
}

/* "Pulse" molto leggero per richiamare il tema neon */
@keyframes neonBreath {
  0%,100% { box-shadow: 0 0 12px color-mix(in srgb, var(--neon-color), transparent 70%);}
  50%     { box-shadow: 0 0 18px color-mix(in srgb, var(--neon-color), transparent 50%);}
}
.notif-head-filter { animation: neonBreath 3.4s ease-in-out infinite; }

/* Il bottone X resta a destra, invariato ma con allineamento migliore */
.notif-close {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 34px; height: 34px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
}
.notif-close:hover {
  border-color: color-mix(in srgb, var(--neon-color), transparent 45%);
  box-shadow: 0 0 12px color-mix(in srgb, var(--neon-color), transparent 55%);
}

/* ============================================================
   NOTIFICHE: Select "Assegnatario" nell'HEADER (stile neon) 
   ============================================================ */

/* Contenitore (pill neon) */
.notif-head-filter {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--panel-2), transparent 18%);
  border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
  box-shadow:
    0 0 0 1px color-mix(in srgb, var(--neon-color), transparent 75%) inset,
    0 0 16px color-mix(in srgb, var(--neon-color), transparent 70%);
  animation: neonBreath 3.4s ease-in-out infinite;
}

/* ðŸ‘¤ Icona piÃ¹ chiara + glow */
.notif-head-filter .ico {
  font-size: 15px;
  color: color-mix(in srgb, var(--neon-color), white 20%);
  filter:
    drop-shadow(0 0 6px color-mix(in srgb, var(--neon-color), transparent 30%))
    drop-shadow(0 0 12px color-mix(in srgb, var(--neon-color), transparent 55%));
  opacity: 0.95;
}

/* Select (valore corrente) */
#notifAssigneeFilter {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  color-scheme: dark; /* aiuta i menu nativi scuri */

  background: color-mix(in srgb, var(--panel-2), transparent 6%);
  color: var(--txt);
  border: 1px solid color-mix(in srgb, var(--border), transparent 60%);
  border-radius: 999px;
  padding: 6px 28px 6px 12px;
  height: 34px;
  min-width: 190px;

  font-weight: 700;
  font-size: var(--fs-sm);
  letter-spacing: .2px;

  outline: none;
  transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;

  /* caret â€œdoppio puntinoâ€ neon */
  background-image:
    radial-gradient(circle at right 12px center, color-mix(in srgb, var(--neon-color), transparent 35%) 0 2px, transparent 3px),
    radial-gradient(circle at right 18px center, color-mix(in srgb, var(--neon-color), transparent 35%) 0 2px, transparent 3px);
  background-repeat: no-repeat;
}

/* Hover/Focus piÃ¹ â€œneonâ€ */
#notifAssigneeFilter:hover {
  border-color: color-mix(in srgb, var(--neon-color), transparent 35%);
  box-shadow: 0 0 12px color-mix(in srgb, var(--neon-color), transparent 55%);
}
#notifAssigneeFilter:focus {
  border-color: var(--neon-color);
  box-shadow:
    0 0 0 1px var(--neon-color) inset,
    0 0 18px color-mix(in srgb, var(--neon-color), transparent 40%);
}

/* Z-index per far stare la lista sopra l'header */
#notifAssigneeFilter { position: relative; z-index: 2; }

/* ============================================================
   LISTA OPZIONI (dropdown nativo) â€” tema scuro leggibile
   (Supporto: Chromium, Safari, FF recente)
   ============================================================ */
#notifAssigneeFilter option {
  background-color: color-mix(in srgb, var(--panel-2), transparent 10%) !important;
  color: var(--txt) !important;
}

/* Alcuni browser usano il menÃ¹ di sistema: forziamo un minimo */
#notifAssigneeFilter::-ms-expand { display: none; } /* vecchio Edge/IE */
#notifAssigneeFilter:focus::-ms-value {
  background-color: color-mix(in srgb, var(--panel-2), transparent 10%);
  color: var(--txt);
}

/* â€œBreathâ€ neon del contenitore */
@keyframes neonBreath {
  0%,100% { box-shadow: 0 0 12px color-mix(in srgb, var(--neon-color), transparent 70%);}
  50%     { box-shadow: 0 0 18px color-mix(in srgb, var(--neon-color), transparent 50%);}
}

/* Bottone X coerente (giÃ  presente, ritocco contrasto) */
.notif-close {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 34px; height: 34px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
}
.notif-close:hover {
  border-color: color-mix(in srgb, var(--neon-color), transparent 45%);
  box-shadow: 0 0 12px color-mix(in srgb, var(--neon-color), transparent 55%);
}
